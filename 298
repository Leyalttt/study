298ç¬”è®°

### 1.2 Embeddingè¯åµŒå…¥

#### 1.2.1è¯åµŒå…¥ä»‹ç»

**å°†è¯è¯­æ˜ å°„ï¼ˆè½¬æ¢ï¼‰ä¸ºå®žæ•°å‘é‡ï¼ˆä¸€ä¸²æ•°å­—ï¼‰**

#### 1.2.2.è¯åµŒå…¥(Word Embeddingåˆå«è¯å‘é‡)æ–¹æ³•:

##### 1. OneHot

ä»–çš„å€¼åªæœ‰0å’Œ1

ç¼ºç‚¹:

- **One-Hotç¼–ç ä¸­æ‰€æœ‰è¯å‘é‡ä¹‹é—´å½¼æ­¤æ­£äº¤**æ—¶ï¼Œæ„å‘³ç€ä»»æ„ä¸¤ä¸ªè¯å‘é‡ä¹‹é—´çš„ç‚¹ç§¯ä¸º0,è¿™æ„å‘³ç€å®ƒä»¬åœ¨å‘é‡ç©ºé—´ä¸­æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œ**æ²¡æœ‰ä½“çŽ°è¯ä¸Žè¯ä¹‹é—´çš„ç›¸ä¼¼æ€§**, åªèƒ½åšåˆ°åŒºåˆ†è¯
- **One-Hotè¯å‘é‡åœ¨è¯è¡¨ç¨€ç–ä¸”é«˜ç»´ï¼Œè®¡ç®—è´¹èµ„æºå’Œæ—¶é—´ï¼›ç”¨PCAå¼ºè¡ŒåŽ‹ç¼©ï¼ˆé™ç»´ï¼‰æ˜¯ä¸ªç®€å•å®žç”¨çš„æ•‘æ€¥åŠžæ³•**

ä¼˜ç‚¹:

æ¯”å¦‚:è¯"A"çš„One-Hotç¼–ç ä¸º[1, 0, 0, 0, 0]ï¼Œè¯"B"çš„One-Hotç¼–ç ä¸º[0, 1, 0, 0, 0]ï¼Œå®ƒä»¬çš„ç‚¹ç§¯ä¸ºï¼š

1Â·0 + 0Â·1 + 0Â·0 + 0Â·0 + 0Â·0 = 0

- ##### ä¸ºä»€ä¹ˆç‰¹å¾å‘é‡è¦æ˜ å°„åˆ°æ¬§å¼ç©ºé—´?

å°†ç¦»æ•£ç‰¹å¾é€šè¿‡OneHotç¼–ç æ˜ å°„åˆ°æ¬§å¼ç©ºé—´ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ç¬›å¡å°”åæ ‡ç³»ï¼‰ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿è¿›è¡Œæ•°å­¦è®¡ç®—å’Œæ¯”è¾ƒã€‚

"ç¦»æ•£å€¼åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶ç‰¹å¾"è¿™å¥è¯çš„æ„æ€æ˜¯ï¼Œå¯¹äºŽæ¯ä¸€ä¸ªç¦»æ•£å€¼ï¼Œæˆ‘ä»¬éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„äºŒè¿›åˆ¶ç‰¹å¾ï¼ˆå³åªæœ‰0å’Œ1ä¸¤ç§å–å€¼çš„ç‰¹å¾ï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºè¯¥ç¦»æ•£å€¼æ˜¯å¦å­˜åœ¨ã€‚

**ä¸¾ä¸ªä¾‹å­**ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç¦»æ•£ç‰¹å¾â€œé¢œè‰²â€ï¼Œå–å€¼å¯ä»¥æ˜¯â€œçº¢è‰²â€ã€â€œè“è‰²â€å’Œâ€œç»¿è‰²â€ã€‚å¦‚æžœæˆ‘ä»¬ç”¨OneHotç¼–ç æ¥å¤„ç†è¿™ä¸ªç‰¹å¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šåˆ›å»ºä¸‰ä¸ªæ–°çš„äºŒè¿›åˆ¶ç‰¹å¾ï¼š

å°†è¿™äº›ç¦»æ•£ç‰¹å¾è½¬æ¢æˆäº†ä¸€ç»„è¿žç»­çš„æ•°å€¼ç‰¹å¾, å¦‚æžœæˆ‘ä»¬ç”¨OneHotç¼–ç ï¼Œçº¢è‰²ã€è“è‰²å’Œç»¿è‰²åˆ†åˆ«å¯¹åº”[1, 0, 0]ã€[0, 1, 0]å’Œ[0, 0, 1]ï¼Œé‚£ä¹ˆè¿™äº›é¢œè‰²åœ¨æ¬§å¼ç©ºé—´ä¸­çš„è·ç¦»å°±æ˜¯ä¸€æ ·çš„,è¿™æ ·ï¼Œæ¯ä¸ªç¦»æ•£å€¼å°±å¯¹åº”äº†æ¬§å¼ç©ºé—´ä¸­çš„ä¸€ä¸ªç‚¹ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨**æ¬§å¼ç©ºé—´ä¸­çš„å„ç§è·ç¦»å’Œç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•**æ¥å¤„ç†è¿™äº›ç‰¹å¾äº†

**ä¸¾ä¸ªä¾‹å­**ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç¦»æ•£ç‰¹å¾â€œé¢œè‰²â€ï¼Œå–å€¼å¯ä»¥æ˜¯â€œçº¢è‰²â€ã€â€œè“è‰²â€å’Œâ€œç»¿è‰²â€ã€‚ç›´æŽ¥ç”¨æ•°å­—è¡¨ç¤ºè¿™äº›é¢œè‰²ï¼ˆæ¯”å¦‚çº¢è‰²=1ï¼Œè“è‰²=2ï¼Œç»¿è‰²=3ï¼‰å¯èƒ½ä¼šå¯¼è‡´è®¡ç®—æœºé”™è¯¯åœ°è®¤ä¸ºçº¢è‰²å’Œè“è‰²ä¹‹é—´çš„è·ç¦»æ¯”çº¢è‰²å’Œç»¿è‰²ä¹‹é—´çš„è·ç¦»å°

å¥½çš„ï¼Œæˆ‘ä»¬æ¥ç”¨ **æ–‡æœ¬ç›¸ä¼¼åº¦** è¿™ä¸ªæœ€å¸¸è§çš„ä¾‹å­æ¥è§£é‡Šä½™å¼¦ç›¸ä¼¼åº¦ï¼ˆCosine Similarityï¼‰ã€‚

**æ¬§å¼ç©ºé—´ä¸­çš„ä½™å¼¦ç›¸ä¼¼åº¦æ ¸å¿ƒæ€æƒ³ï¼š**
ä½™å¼¦ç›¸ä¼¼åº¦è¡¡é‡çš„æ˜¯ä¸¤ä¸ª**å‘é‡åœ¨æ–¹å‘ä¸Šçš„å·®å¼‚**ï¼Œè€Œä¸æ˜¯å®ƒä»¬çš„å¤§å°ï¼ˆé•¿åº¦ï¼‰ã€‚å®ƒå…³æ³¨çš„æ˜¯å®ƒä»¬æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªæ–¹å‘ã€‚

- **å€¼ = 1ï¼š** ä¸¤ä¸ªå‘é‡æ–¹å‘**å®Œå…¨ç›¸åŒ**ï¼ˆå¤¹è§’ä¸º0åº¦ï¼‰ã€‚
- **å€¼ = 0ï¼š** ä¸¤ä¸ªå‘é‡**äº’ç›¸åž‚ç›´**ï¼ˆå¤¹è§’ä¸º90åº¦ï¼‰ï¼Œå®Œå…¨ä¸ç›¸å…³ã€‚
- **å€¼ = -1ï¼š** ä¸¤ä¸ªå‘é‡æ–¹å‘**å®Œå…¨ç›¸å**ï¼ˆå¤¹è§’ä¸º180åº¦ï¼‰ã€‚
- å€¼è¶ŠæŽ¥è¿‘1ï¼Œè¡¨ç¤ºä¸¤ä¸ªå‘é‡çš„æ–¹å‘è¶Šç›¸ä¼¼ã€‚

**ä½™å¼¦ç›¸ä¼¼åº¦ä¸ºä»€ä¹ˆåœ¨æ–‡æœ¬ä¸­å¸¸ç”¨ï¼Ÿ**
å› ä¸ºæˆ‘ä»¬å¯ä»¥æŠŠæ–‡æ¡£ï¼ˆå¥å­ã€æ®µè½ç­‰ï¼‰è¡¨ç¤ºæˆé«˜ç»´ç©ºé—´ä¸­çš„å‘é‡ï¼ˆä¾‹å¦‚ï¼Œæ¯ä¸ªç»´åº¦ä»£è¡¨ä¸€ä¸ªè¯çš„å‡ºçŽ°æ¬¡æ•°æˆ–é‡è¦æ€§ï¼‰ã€‚ä½™å¼¦ç›¸ä¼¼åº¦å¯ä»¥å¿½ç•¥æ–‡æ¡£çš„é•¿åº¦å·®å¼‚ï¼ˆæ¯”å¦‚ä¸€ä¸ªé•¿æ–‡æ¡£å’Œä¸€ä¸ªçŸ­æ–‡æ¡£å¯èƒ½è°ˆè®ºåŒä¸€ä¸ªä¸»é¢˜ï¼‰ï¼Œåªå…³æ³¨å®ƒä»¬åŒ…å«çš„è¯è¯­åŠå…¶æƒé‡çš„â€œæ–¹å‘â€æ˜¯å¦ä¸€è‡´ã€‚

**ä¾‹å­ï¼šæ¯”è¾ƒä¸‰ä¸ªå¥å­çš„ç›¸ä¼¼åº¦**

1. **å¥å­Aï¼š** â€œæˆ‘å–œæ¬¢è¯»ä¹¦â€
2. **å¥å­Bï¼š** â€œä»–å–œæ¬¢çœ‹ç”µå½±â€
3. **å¥å­Cï¼š** â€œå¤©ç©ºæ˜¯è“è‰²çš„â€

**æ­¥éª¤1ï¼šåˆ›å»ºè¯è¡¨ & å‘é‡è¡¨ç¤º**

- **åˆ—å‡ºæ‰€æœ‰ä¸é‡å¤çš„è¯ï¼š** ä»Žä¸‰ä¸ªå¥å­ä¸­æ‰¾å‡ºæ‰€æœ‰ä¸åŒçš„è¯ï¼š`[æˆ‘, å–œæ¬¢, è¯»ä¹¦, ä»–, çœ‹, ç”µå½±, å¤©ç©º, æ˜¯, è“è‰²çš„]` (å…±9ä¸ªè¯)ã€‚
- **å°†å¥å­è¡¨ç¤ºä¸ºå‘é‡ï¼š** æ¯ä¸ªå¥å­çš„å‘é‡é•¿åº¦ç­‰äºŽè¯è¡¨å¤§å°ï¼ˆ9ç»´ï¼‰ã€‚å‘é‡çš„æ¯ä¸ªä½ç½®å¯¹åº”ä¸€ä¸ªè¯ï¼Œæ•°å€¼è¡¨ç¤ºè¯¥è¯åœ¨å¥å­ä¸­å‡ºçŽ°çš„æ¬¡æ•°ï¼ˆè¯é¢‘ï¼ŒTFï¼‰ã€‚
  - **å‘é‡A (æˆ‘å–œæ¬¢è¯»ä¹¦):** `[1, 1, 1, 0, 0, 0, 0, 0, 0]` (å¯¹åº”è¯ï¼šæˆ‘, å–œæ¬¢, è¯»ä¹¦)
  - **å‘é‡B (ä»–å–œæ¬¢çœ‹ç”µå½±):** `[0, 1, 0, 1, 1, 1, 0, 0, 0]` (å¯¹åº”è¯ï¼šå–œæ¬¢, ä»–, çœ‹, ç”µå½±)
  - **å‘é‡C (å¤©ç©ºæ˜¯è“è‰²çš„):** `[0, 0, 0, 0, 0, 0, 1, 1, 1]` (å¯¹åº”è¯ï¼šå¤©ç©º, æ˜¯, è“è‰²çš„)

**æ­¥éª¤2ï¼šè®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦ï¼ˆå…¬å¼ï¼‰**

ä½™å¼¦ç›¸ä¼¼åº¦ (Cosine Similarity) = `(A â€¢ B) / (||A|| * ||B||)`

- **A â€¢ B:** å‘é‡Aå’Œå‘é‡Bçš„**ç‚¹ç§¯** (Dot Product)ã€‚è®¡ç®—æ–¹å¼ï¼šå¯¹åº”ç»´åº¦ç›¸ä¹˜åŽæ±‚å’Œã€‚
- **||A||:** å‘é‡Açš„**æ¨¡é•¿** (Magnitude / Euclidean Norm)ã€‚è®¡ç®—æ–¹å¼ï¼šå‘é‡æ‰€æœ‰å…ƒç´ çš„å¹³æ–¹å’Œå¼€æ ¹å· `sqrt(sum(x_iÂ²))`ã€‚
- **||B||:** å‘é‡Bçš„æ¨¡é•¿ã€‚

**è®¡ç®— A å’Œ B çš„ç›¸ä¼¼åº¦ï¼š**

1. **ç‚¹ç§¯ (A â€¢ B):**
   `(1*0) + (1*1) + (1*0) + (0*1) + (0*1) + (0*1) + (0*0) + (0*0) + (0*0) = 0 + 1 + 0 + 0 + 0 + 0 + 0 + 0 + 0 = 1`
2. **æ¨¡é•¿ ||A||:**
   `sqrt(1Â² + 1Â² + 1Â² + 0Â² + 0Â² + 0Â² + 0Â² + 0Â² + 0Â²) = sqrt(1 + 1 + 1) = sqrt(3) â‰ˆ 1.732`
3. **æ¨¡é•¿ ||B||:**
   `sqrt(0Â² + 1Â² + 0Â² + 1Â² + 1Â² + 1Â² + 0Â² + 0Â² + 0Â²) = sqrt(0 + 1 + 0 + 1 + 1 + 1) = sqrt(4) = 2`
4. **ä½™å¼¦ç›¸ä¼¼åº¦ (A, B):**
   `(1) / (1.732 * 2) â‰ˆ 1 / 3.464 â‰ˆ 0.289`
5. è¿™ä¸¤ä¸ªå¥å­éƒ½åŒ…å«â€œå–œæ¬¢â€ï¼Œå¹¶ä¸”è°ˆè®ºçš„éƒ½æ˜¯äººçš„çˆ±å¥½ï¼ˆè¯»ä¹¦ vs çœ‹ç”µå½±ï¼‰ã€‚è™½ç„¶å…·ä½“çˆ±å¥½ä¸åŒï¼Œä½†ä¸»é¢˜ç±»åž‹ç›¸ä¼¼ï¼Œæ‰€ä»¥ç›¸ä¼¼åº¦æ˜¯æ­£çš„ï¼ˆ>0ï¼‰ï¼Œä½†ä¸å¤ªé«˜ï¼ˆè¿œå°äºŽ1ï¼‰

åŒç†AC, BCç›¸ä¼¼åº¦éƒ½æ˜¯0ä¸¤ä¸ªå¥å­è°ˆè®ºçš„æ˜¯å®Œå…¨ä¸åŒçš„ä¸»é¢˜ï¼ˆçˆ±å¥½ vs å¤©æ°”ï¼‰ï¼Œæ²¡æœ‰ä»»ä½•å…±åŒçš„è¯æ±‡ï¼Œæ‰€ä»¥ç›¸ä¼¼åº¦ä¸º0ã€‚

**é€‚ç”¨åœºæ™¯**ï¼šè¡¡é‡æ–‡æœ¬ç›¸ä¼¼åº¦ã€æ–‡æ¡£æ£€ç´¢ã€æŽ¨èç³»ç»Ÿä¸­è¡¡é‡ç”¨æˆ·/ç‰©å“å…´è¶£æ–¹å‘çš„ç›¸ä¼¼æ€§ç­‰ã€‚å½“å…³å¿ƒæ¨¡å¼æˆ–è¶‹åŠ¿æ˜¯å¦ä¸€è‡´ï¼Œè€Œä¸å…³å¿ƒç»å¯¹æ•°å€¼å¤§å°æ—¶æ•ˆæžœå¥½ã€‚

**2.æ¬§å¼ç©ºé—´ä¸­çš„æ¬§å‡ é‡Œå¾—è·ç¦» (Euclidean Distance):**

**é€‚ç”¨åœºæ™¯**ï¼šèšç±»ï¼ˆå¦‚K-Meansï¼‰ã€Kè¿‘é‚»ï¼ˆKNNï¼‰ç­‰éœ€è¦è®¡ç®—å®žé™…ç©ºé—´è·ç¦»çš„ä»»åŠ¡ã€‚å½“ç‰¹å¾æœ‰æ˜Žç¡®ç‰©ç†æ„ä¹‰ä¸”é‡çº²ä¸€è‡´ï¼ˆæˆ–å·²æ ‡å‡†åŒ–ï¼‰æ—¶æ•ˆæžœå¥½ã€‚



##### 2. Word2Vec

Distributed representationï¼ˆ**åˆ†å¸ƒå¼**è¡¨ç¤ºï¼‰æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼Œä¹Ÿæ˜¯è§£å†³ One-Hot ç¼–ç ç¼ºé™·çš„æ ¸å¿ƒæ€è·¯ã€‚å®ƒçš„æœ¬è´¨æ˜¯ï¼š**ç”¨ä¸€ä¸ªä½Žç»´ã€ç¨ å¯†ä¸”è¿žç»­çš„å‘é‡è¡¨ç¤ºä¸€ä¸ªè¯ï¼ˆæˆ–ç¬¦å·ï¼‰ï¼Œä¸”è¿™ä¸ªè¯çš„è¯­ä¹‰ä¿¡æ¯è¢«â€œåˆ†å¸ƒå¼â€å­˜å‚¨åœ¨è¿™ä¸ªå‘é‡çš„å„ä¸ªç»´åº¦ä¸­**ã€‚

åˆ†å¸ƒå¼è¡¨ç¤ºä¸æ˜¯äººä¸ºè®¾å®šçš„ï¼Œè€Œæ˜¯**ä»Žæ•°æ®ä¸­è‡ªåŠ¨å­¦ä¹ è¯­ä¹‰ç‰¹å¾**ï¼š

1. **è®­ç»ƒç›®æ ‡**ï¼šè®©å‡ºçŽ°åœ¨ç›¸ä¼¼ä¸Šä¸‹æ–‡ä¸­çš„è¯å…·æœ‰ç›¸ä¼¼å‘é‡ã€‚

   - ä¾‹ï¼šæ¨¡åž‹å‘çŽ°â€œçŒ«â€å’Œâ€œç‹—â€å¸¸å‡ºçŽ°åœ¨â€œå® ç‰©â€â€œå–‚é£Ÿâ€é™„è¿‘ â†’ è®©äºŒè€…çš„**å‘é‡æŽ¥è¿‘**ã€‚

2. **ç»å…¸ç®—æ³•**ï¼š

   - `Word2Vec`ï¼šé€šè¿‡é¢„æµ‹ä¸Šä¸‹æ–‡ï¼ˆSkip-gramï¼‰æˆ–é¢„æµ‹ä¸­å¿ƒè¯ï¼ˆCBOWï¼‰å­¦ä¹ ã€‚

     CBOWæ¨¡åž‹é€šå¸¸åŒ…æ‹¬è¾“å…¥å±‚ã€éšè—å±‚å’Œè¾“å‡ºå±‚ã€‚è¾“å…¥å±‚æŽ¥æ”¶ä¸Šä¸‹æ–‡è¯çš„one-hotç¼–ç ï¼Œéšè—å±‚é€šè¿‡æƒé‡çŸ©é˜µå°†è¾“å…¥è½¬æ¢ä¸ºä½Žç»´çš„å¯†é›†å‘é‡ï¼Œè¾“å‡ºå±‚åˆ™ä½¿ç”¨softmaxå‡½æ•°æ¥é¢„æµ‹ç›®æ ‡è¯çš„æ¦‚çŽ‡åˆ†å¸ƒ

     Skip-Gramæ¨¡åž‹åŒæ ·åŒ…æ‹¬è¾“å…¥å±‚ã€éšè—å±‚å’Œè¾“å‡ºå±‚ã€‚ä½†åœ¨è¿™é‡Œï¼Œè¾“å…¥å±‚åªæŽ¥æ”¶ä¸­å¿ƒè¯çš„one-hotç¼–ç ï¼Œéšè—å±‚åŒæ ·é€šè¿‡æƒé‡çŸ©é˜µè½¬æ¢ä¸ºå¯†é›†å‘é‡ï¼Œè€Œè¾“å‡ºå±‚åˆ™å°è¯•ä¸ºä¸Šä¸‹æ–‡ä¸­çš„æ¯ä¸ªè¯åˆ†é…æ¦‚çŽ‡

   - `GloVe`ï¼šåŸºäºŽå…¨å±€è¯å…±çŽ°ç»Ÿè®¡ä¼˜åŒ–å‘é‡ã€‚

   - `FastText`ï¼šè€ƒè™‘å­è¯ä¿¡æ¯ï¼ˆè§£å†³æœªç™»å½•è¯é—®é¢˜ï¼‰ã€‚

3. **å¯è‡ªå®šä¹‰ç»´åº¦**ï¼š

   - å¼€å‘è€…å¯æŒ‡å®šå‘é‡å¤§å°ï¼ˆå¦‚ 50/100/300 ç»´ï¼‰ï¼Œç»´åº¦è¶Šä½Žè®­ç»ƒè¶Šå¿«ä½†ä¿¡æ¯å®¹é‡è¶Šå°ï¼Œéœ€æƒè¡¡ä»»åŠ¡éœ€æ±‚

**Word2VecåŠ é€Ÿæ–¹æ³•**
ä¸€èˆ¬ç¥žç»ç½‘ç»œè¯­è¨€æ¨¡åž‹åœ¨é¢„æµ‹çš„æ—¶å€™ï¼Œè¾“å‡ºçš„æ˜¯é¢„æµ‹ç›®æ ‡è¯çš„æ¦‚çŽ‡ï¼Œé€šè¿‡softmaxå¾—åˆ°ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸€æ¬¡é¢„æµ‹éƒ½è¦åŸºäºŽå…¨éƒ¨çš„æ•°æ®é›†è¿›è¡Œè®¡ç®—ï¼Œè¿™æ— ç–‘ä¼šå¸¦æ¥å¾ˆå¤§çš„æ—¶é—´å¼€é”€ã€‚ä¾‹å­å¦‚ä¸‹:

- â€œè‹¹æžœâ€ -> â€œæ±â€ çš„logitä¸º2.0
- â€œè‹¹æžœâ€ -> â€œæ‰‹æœºâ€ çš„logitä¸º1.5
- â€œè‹¹æžœâ€ -> â€œç”µè„‘â€ çš„logitä¸º0.5

ç»è¿‡softmaxåŽ->softmaxæ¦‚çŽ‡åˆ†å¸ƒ: [0.65900117 0.24243298 0.09856585], è¿™æ„å‘³ç€ï¼Œåœ¨ç»™å®šâ€œè‹¹æžœâ€è¿™ä¸ªè¯åŽï¼Œæ¨¡åž‹é¢„æµ‹ä¸‹ä¸€ä¸ªè¯æ˜¯â€œæ±â€çš„æ¦‚çŽ‡ä¸º65.9%ï¼Œæ˜¯â€œæ‰‹æœºâ€çš„æ¦‚çŽ‡ä¸º24.2%ï¼Œæ˜¯â€œç”µè„‘â€çš„æ¦‚çŽ‡ä¸º9.9%ã€‚è¿™äº›æ¦‚çŽ‡ä¹‹å’Œä¸º1

Word2Vecæå‡ºä¸¤ç§åŠ å¿«è®­ç»ƒé€Ÿåº¦çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯Hierarchical softmax(éœå¤«æ›¼æ ‘,ç”¨çš„ä¸å¤š)ï¼Œå¦ä¸€ç§æ˜¯Negative Sampling(è´Ÿé‡‡æ ·,å¸¸è§)

**éœå¤«æ›¼æ ‘:**

ä¸ºäº†é¿å…è®¡ç®—æ‰€æœ‰è¯çš„softmaxæ¦‚çŽ‡ï¼Œword2vecé‡‡ç”¨äº†éœå¤«æ›¼æ ‘æ¥ä»£æ›¿ä»Žéšå±‚åˆ°softmaxå±‚çš„æ˜ å°„ï¼Œæ ¹æ®è¯é¢‘æ¥å»ºç«‹å“ˆå¤«æ›¼æ ‘ã€‚å°†å¤šåˆ†ç±»è½¬ä¸ºäºŒåˆ†ç±»é—®é¢˜, å¯¹æ‰€æœ‰è¯è¿›è¡ŒäºŒè¿›åˆ¶ç¼–ç , ç‰¹ç‚¹å¦‚ä¸‹:

å¶å­èŠ‚ç‚¹çš„ä¸ªæ•°å°±æ˜¯è¯æ±‡è¡¨çš„å¤§å°

ä¸åŒè¯ç¼–ç ä¸åŒ, æ¯ä¸ªè¯çš„ç¼–ç ä¸ä¼šæˆä¸ºå¦ä¸€ä¸ªè¯çš„å‰ç¼€

è¯é¢‘è¶Šé«˜ç¼–ç é•¿åº¦è¶ŠçŸ­

å¦‚:011011

ä¼˜ç‚¹:

1.è®¡ç®—æ•ˆçŽ‡é«˜

2.é«˜é¢‘è¯æŽ¥è¿‘è¯æ ¹æ›´å®¹æ˜“è¢«æ£€ç´¢

ç¼ºé™·:

å¦‚æžœæˆ‘ä»¬çš„è®­ç»ƒæ ·æœ¬é‡Œçš„ä¸­å¿ƒè¯æ˜¯ä¸€ä¸ªå¾ˆç”Ÿåƒ»çš„è¯ï¼Œé‚£ä¹ˆå°±å¾—åœ¨éœå¤«æ›¼æ ‘ä¸­è¾›è‹¦çš„å‘ä¸‹èµ°å¾ˆä¹…äº†ã€‚è´Ÿé‡‡æ ·å¯ä»¥è§£å†³è¯¥é—®é¢˜



**è´Ÿé‡‡æ ·(æ¦‚ä½¿ç”¨çŽ‡é‡‡æ ·)**

å¯¹äºŽç»™å®šçš„è¯Wçš„ä¸Šä¸‹æ–‡Context(w)ï¼Œè¯wæ˜¯ä¸€ä¸ªæ­£æ ·æœ¬ï¼Œå…¶ä»–è¯æ˜¯è´Ÿæ ·æœ¬ä½¿ç”¨äº†sigmoidå‡½æ•°

å½“ä½¿ç”¨è´Ÿé‡‡æ ·æ—¶ï¼Œæˆ‘ä»¬å°†éšæœºé€‰æ‹©ä¸€å°éƒ¨åˆ†çš„negative words(æ¯”å¦‚é€‰5ä¸ªnegative words)æ¥æ›´æ–°å¯¹åº”çš„æƒé‡ã€‚æˆ‘ä»¬ä¹Ÿä¼šå¯¹æˆ‘ä»¬çš„positive wordè¿›è¡Œæƒé‡æ›´æ–°(ä¸Šé¢çš„ä¾‹å­æŒ‡çš„æ˜¯"quick")

æ¦‚çŽ‡é‡‡æ ·æ˜¯ä¸€ç§æ ¹æ®è¯é¢‘è¿›è¡ŒéšæœºæŠ½æ ·çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å€¾å‘äºŽé€‰æ‹©è¯é¢‘æ¯”è¾ƒå¤§çš„è´Ÿæ ·æœ¬ã€‚Word2vecé‡‡ç”¨0.75æ¬¡å¹‚æ¥å‡å°è¯é¢‘å·®å¼‚ï¼Œä½¿å¾—è¯é¢‘è¾ƒå°çš„æ ·æœ¬ä¹Ÿæœ‰æœºä¼šè¢«é‡‡åˆ°ã€‚



##### 3. FastText

FastText æ˜¯ä¸€ä¸ªåŸºäºŽè¯å‘é‡çš„å¿«é€Ÿæ–‡æœ¬åˆ†ç±»ç®—æ³•ï¼Œå…¶ç»“æž„ä¸Ž CBOW æ¨¡åž‹ç›¸ä¼¼ï¼Œéƒ½åŒ…å«è¾“å…¥å±‚ã€éšå«å±‚å’Œè¾“å‡ºå±‚ã€‚ä¸¤è€…çš„ä¸»è¦åŒºåˆ«åœ¨äºŽè¾“å…¥å’Œè¾“å‡ºçš„ä¸åŒï¼š

1. è¾“å…¥ï¼šCBOW æ¨¡åž‹çš„è¾“å…¥æ˜¯ç›®æ ‡å•è¯çš„ä¸Šä¸‹æ–‡ï¼Œè€Œ FastText çš„è¾“å…¥åˆ™æ˜¯å¤šä¸ªå•è¯åŠå…¶ n-gram ç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾ç”¨æ¥è¡¨ç¤ºå•ä¸ªæ–‡æ¡£ã€‚CBOW çš„è¾“å…¥å•è¯æ˜¯ one-hot ç¼–ç ï¼Œè€Œ FastText çš„è¾“å…¥ç‰¹å¾æ˜¯è¢« embedding è¿‡çš„ã€‚

2. è¾“å‡ºï¼šCBOW æ¨¡åž‹çš„è¾“å‡ºæ˜¯ç›®æ ‡è¯æ±‡ï¼Œè€Œ FastText çš„è¾“å‡ºåˆ™æ˜¯æ–‡æ¡£å¯¹åº”çš„ç±»æ ‡ã€‚

   

### 1.3 Attentionæ³¨æ„åŠ›

1.3.4 KV Cacheé”®å€¼ç¼“å­˜

KV Cacheåº”ç”¨äºŽæŽ¨ç†é˜¶æ®µ(ä¹Ÿå°±æ˜¯Kã€Vçš„å€¼æ˜¯ä¸å˜çš„)

KV Cacheåªå­˜åœ¨äºŽDecoderè§£ç å™¨ä¸­
å®ƒçš„ç›®çš„æ˜¯ä¸ºäº†åŠ é€ŸQ@K@Vçš„ä¸¤æ¬¡çŸ©é˜µç›¸ä¹˜æ—¶çš„é€Ÿåº¦
KV Cacheä¼šåŠ å¤§å†…å­˜å ç”¨



**å°†ä¹‹å‰åºåˆ—tokenè®¡ç®—è¿‡çš„KVç¼“å­˜ä¸‹æ¥ç”¨ï¼Œè¿™å°±æ˜¯KV CacheæŠ€æœ¯**

![1753005556053](D:\TTT\NLPç®—æ³•\ç¬”è®°\298å›¾ç‰‡\1753005556053.png)

å‡è®¾æœ‰1000ä¸ªå­—, æœ€å¤§ç»´åº¦512

![1753005877410](D:\TTT\NLPç®—æ³•\ç¬”è®°\298å›¾ç‰‡\1753005877410.png)





![1753006870104](C:\Users\TTT\AppData\Roaming\Typora\typora-user-images\1753006870104.png)

![1753007244720](D:\TTT\NLPç®—æ³•\ç¬”è®°\298å›¾ç‰‡\1753007244720.png)

KV Cache ä¼˜åŒ–æ–¹æ³•
1.å…±ç”¨ KV cache: MQAï¼ŒGQA è§1.3.5ç«  1.3 Attention æ³¨æ„åŠ›2.çª—å£ä¼˜åŒ–:
KV cache çš„ä½œç”¨æ˜¯è®¡ç®— attentionï¼Œå½“æŽ¨ç†æ—¶çš„æ–‡æœ¬é•¿åº¦Tå¤§äºŽè®­ç»ƒæ—¶çš„æœ€å¤§é•¿åº¦L æ—¶ï¼Œä¸€ä¸ªè‡ªç„¶çš„æƒ³æ³•å°±æ˜¯æ»‘åŠ¨çª—å£ã€‚è¿™é‡Œåˆæœ‰ä¸‰ç§æ–¹å¼:
ã€‚
å›ºå®šçª—å£é•¿åº¦(å›¾ b)ï¼Œå…¸åž‹ä»£è¡¨å³ Longformerï¼Œè¯¥æ–¹æ³•å®žçŽ°ç®€å•ï¼Œè€Œç©ºé—´å¤æ‚åº¦åªæœ‰ O(TL)ä½†æ˜¯ç²¾åº¦ä¸‹é™æ¯”è¾ƒå¤§
KV é‡è®¡ç®—(å›¾ c)ï¼Œè¯¥æ–¹æ³•éœ€è¦æ¯æ¬¡è®¡ç®—éƒ½é‡æ–°è®¡ç®—é•¿åº¦ä¸ºLçš„ KV cacheï¼Œç”±äºŽé‡è®¡ç®—çš„å­˜åœ¨ã€‚å…¶ç²¾åº¦å¯ä»¥ä¿è¯ï¼Œä½†æ˜¯æ€§èƒ½æŸå¤±æ¯”è¾ƒå¤§
ç®­åž‹ attention çª—å£ï¼Œåœ¨ LM-Infinit ä¸­å°±å·²ç»è¢«æå‡ºäº†ï¼Œå…¶åŸºæœ¬åŽŸç†å’Œ StreamingLLM æ˜¯ä¸€è‡´çš„ã€‚3.é‡åŒ–ä¸Žç¨€ç–:å½“å‰ä¸»æµæŽ¨ç†æ¡†æž¶éƒ½åœ¨é€æ­¥æ”¯æŒ KV Cache é‡åŒ–ï¼Œä¸€ä¸ªå…¸åž‹çš„æ¡ˆä¾‹æ˜¯ lmdeploy

4.å­˜å‚¨ä¸Žè®¡ç®—ä¼˜åŒ–:
ã€‚ vLLM çš„ PagedAttentionï¼Œç®€å•æ¥è¯´å°±æ˜¯å…è®¸åœ¨éžè¿žç»­çš„å†…å­˜ç©ºé—´ä¸­å­˜å‚¨è¿žç»­çš„ Kå’Œ VFlashDecoding æ˜¯åœ¨ FlashAttention çš„åŸºç¡€ä¸Šé’ˆå¯¹ inference çš„ä¼˜åŒ–ä¸»è¦åˆ†ä¸ºä¸‰æ­¥:
é•¿æ–‡æœ¬ä¸‹å°†KVåˆ†æˆæ›´å°ä¸”æ–¹ä¾¿å¹¶è¡Œçš„chunkå›½
â€å¯¹æ¯ä¸ªchunkçš„KVï¼ŒQå’Œä»–ä»¬è¿›è¡Œä¹‹å‰ä¸€æ ·çš„FlashAttentionèŽ·å–è¿™ä¸ªchunkçš„ç»“æžœ
å¯¹æ¯ä¸ªchunkçš„ç»“æžœè¿›è¡Œreduce


10.4.9 ä¸ºä»€ä¹ˆBERTåœ¨ç¬¬ä¸€å¥å‰ä¼šåŠ ä¸€ä¸ª[CLS]æ ‡å¿—? BERTè¾“å‡ºçš„ä¸¤ä¸ªå‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿâ€‹
â€¢
BERTåœ¨ç¬¬ä¸€å¥å‰ä¼šåŠ ä¸€ä¸ª[CLS]æ ‡å¿—ï¼Œæœ€åŽä¸€å±‚è¯¥ä½ç½®å¯¹åº”çš„å‘é‡å¯ä»¥ä½œä¸ºæ•´å¥è¯çš„è¯­ä¹‰è¡¨ç¤ºï¼Œä»Žè€Œç”¨äºŽä¸‹æ¸¸çš„åˆ†ç±»ä»»åŠ¡ç­‰ã€‚ä¸Žæ–‡æœ¬ä¸­å·²æœ‰çš„å…¶å®ƒè¯ç›¸æ¯”ï¼Œè¿™ä¸ªæ— æ˜Žæ˜¾è¯­ä¹‰ä¿¡æ¯çš„ç¬¦å·ä¼šæ›´â€œå…¬å¹³â€åœ°èžåˆæ–‡æœ¬ä¸­å„ä¸ªè¯çš„è¯­ä¹‰ä¿¡æ¯ï¼Œä»Žè€Œæ›´å¥½çš„è¡¨ç¤ºæ•´å¥è¯çš„è¯­ä¹‰ã€‚å…·ä½“æ¥è¯´ï¼Œself-attentionæ˜¯ç”¨æ–‡æœ¬ä¸­çš„å…¶å®ƒè¯æ¥å¢žå¼ºç›®æ ‡è¯çš„è¯­ä¹‰è¡¨ç¤ºï¼Œä½†æ˜¯ç›®æ ‡è¯æœ¬èº«çš„è¯­ä¹‰è¿˜æ˜¯ä¼šå ä¸»è¦éƒ¨åˆ†çš„ï¼Œå› æ­¤ï¼Œç»è¿‡BERTçš„12å±‚ï¼Œæ¯æ¬¡è¯çš„embeddingèžåˆäº†æ‰€æœ‰è¯çš„ä¿¡æ¯ï¼Œå¯ä»¥åŽ»æ›´å¥½çš„è¡¨ç¤ºè‡ªå·±çš„è¯­ä¹‰ã€‚è€Œ[CLS]ä½æœ¬èº«æ²¡æœ‰è¯­ä¹‰ï¼Œç»è¿‡12å±‚ï¼Œå¾—åˆ°çš„æ˜¯attentionåŽæ‰€æœ‰è¯çš„åŠ æƒå¹³å‡ï¼Œç›¸æ¯”å…¶ä»–æ­£å¸¸è¯ï¼Œå¯ä»¥æ›´å¥½çš„è¡¨å¾å¥å­è¯­ä¹‰ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯¹æœ€åŽä¸€å±‚æ‰€æœ‰è¯çš„embeddingåšpoolingè¡¨å¾å¥å­è¯­ä¹‰â€‹
â€¢
åœ¨BERT TFæºç ä¸­æœ‰ä¸¤ç§è¾“å‡ºâ€‹
â—¦
get_pooled_out()ï¼Œå°±æ˜¯ä¸Šè¿°[CLS]çš„è¡¨ç¤ºï¼Œè¾“å‡ºshapeæ˜¯[batch size,hidden size]â€‹
â—¦
get_sequence_out()ï¼ŒèŽ·å–çš„æ˜¯æ•´ä¸ªå¥å­æ¯ä¸€ä¸ªtokençš„å‘é‡è¡¨ç¤ºï¼Œè¾“å‡ºshapeæ˜¯[batch_size, seq_length, hidden_size]ï¼Œè¿™é‡Œä¹ŸåŒ…æ‹¬[CLS]å¯¹åº”çš„å‘é‡

æ¨¡åž‹ã€‚â€‹
10.4.44 å¤§æ¨¡åž‹çš„å›°æƒ‘åº¦ï¼ˆPPLï¼‰æ˜¯ä»€ä¹ˆï¼Ÿâ€‹
å›°æƒ‘åº¦ï¼ˆPerplexity, PPLï¼‰ç”¨äºŽè¡¡é‡è¯­è¨€æ¨¡åž‹çš„å¥½åã€‚æ¨¡åž‹ Model åœ¨é¢„è®­ç»ƒæµ‹è¯•é›†æ•°æ® 
â€‹
T={w1,w2,â€¦,w N}
ä¸Šçš„å›°æƒ‘åº¦è¶Šä½Žï¼Œè¯´æ˜Žæ¨¡åž‹å¯¹ä¸‹ä¸€ä¸ªå•è¯çš„é¢„æµ‹è¶Šå‡†ç¡®ï¼Œæ¨¡åž‹æ€§èƒ½è¶Šå¥½ï¼Œç”Ÿæˆæ–‡æœ¬çš„æµç•…æ€§å’Œä¸€è‡´æ€§è¶Šé«˜ï¼šâ€‹
                     
Perplexity(Model)=exp(âˆ’ 
N
1
â€‹
  
i=1
âˆ‘
N
â€‹
 logP(w 
i
â€‹
 âˆ£w 
1
â€‹
 ,â€¦,w 
iâˆ’1
â€‹
 ))
â€‹
å…¶ä¸­
â€‹
N
æ˜¯æµ‹è¯•æ•°æ®çš„ token æ€»æ•°ï¼Œ 
â€‹
P(w 
i
â€‹
 âˆ£w 
1
â€‹
 ,â‹¯,w 
iâˆ’1
â€‹
 )
æ˜¯æ¨¡åž‹å¯¹ç¬¬
â€‹
i
ä¸ª token çš„é¢„æµ‹æ¦‚çŽ‡  â€‹
å¯ä»¥çœ‹åˆ°ä¸Šè¿°å…¬å¼æ‹¬å·ä¸­çš„å¼å­å®žé™…ä¸Šå°±æ˜¯é¢„è®­ç»ƒä½¿ç”¨çš„äº¤å‰ç†µ Lossï¼Œæ‰€ä»¥ PPL çš„è®¡ç®—ä¹Ÿå¯ä»¥å†™æˆä¸‹å¼ï¼šâ€‹
â€‹
PPL(Model)=exp(L)
â€‹
åˆ©ç”¨transformersåº“ç®€å•è®¡ç®—é€»è¾‘å¦‚ä¸‹ï¼Œæ›´è¯¦ç»†çš„ä»£ç è§ï¼šhttps://huggingface.co/docs/transformers/perplexityâ€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
Python
from transformers import AutoModelForCausalLM, AutoTokenizerâ€‹
import torchâ€‹
model = AutoModelForCausalLM.from_pretrained("gpt2")â€‹
tokenizer = AutoTokenizer.from_pretrained("gpt2")â€‹
text = "I am RZ, a LLMer and a RLer."â€‹
inputs = tokenizer(text, return_tensors="pt")â€‹
with torch.no_grad():â€‹
    outputs = model(**inputs, labels=inputs["input_ids"])â€‹
    loss = outputs.lossâ€‹
    ppl = torch.exp(loss).item()â€‹
print(f"Perplexity: {ppl}")

å¯¹äºŽé•¿æ–‡æœ¬æ¥è¯´åˆ™éœ€è¦è¿›è¡Œåˆ†å—å¤„ç†ï¼šâ€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
Python
max_length = model.config.n_positionsâ€‹
stride = 512  # æ»‘åŠ¨çª—å£æ­¥é•¿â€‹
total_loss = 0â€‹
total_count = 0â€‹
for i in range(0, len(input_ids), stride):â€‹
    chunk = input_ids[:, i:i+max_length]â€‹
    with torch.no_grad():â€‹
        outputs = model(chunk, labels=chunk)â€‹
    loss = outputs.lossâ€‹
    total_loss += loss.item() * chunk.size(1)â€‹
    total_count += chunk.size(1)â€‹
ppl = torch.exp(total_loss / total_count).item()â€‹
â€‹ â€‹
â€‹
åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ç›‘æŽ§éªŒè¯é›†çš„PPLå˜åŒ–ï¼Œå¯åŠ¨æ€è°ƒæ•´å­¦ä¹ çŽ‡æˆ–æå‰ç»ˆæ­¢è®­ç»ƒï¼Œä¹Ÿå¯ä»¥ç›‘æŽ§é¢„è®­ç»ƒå¤šä»»åŠ¡ã€å¤šé¢†åŸŸæ•°æ®çš„è®­ç»ƒæƒ…å†µï¼ˆæ¯”å¦‚ä»Žæ¯ä¸ªæ•°æ®é›†éšæœºæŠ½æ ·å‡º200ä¸ªå·¦å³çš„æ ·æœ¬ï¼Œä½œä¸ºPPLç›‘æŽ§çš„æ ·æœ¬ï¼‰ã€‚ä½†æ˜¯PPLæŒ‡æ ‡ä¾èµ–æµ‹è¯•æ•°æ®çš„åˆ†å¸ƒï¼Œè‹¥æ•°æ®ä¸Žè®­ç»ƒé›†å·®å¼‚å¤§ï¼ŒPPLå¯èƒ½å¤±çœŸã€‚è€Œä¸”å…¨å±€å¹³å‡å€¼å¯èƒ½æŽ©ç›–å±€éƒ¨ç”Ÿæˆé”™è¯¯ï¼ˆå¦‚é€»è¾‘çŸ›ç›¾ï¼‰ã€‚â€‹
PPLä¸ŽBLEUã€ROUGEçš„åŒºåˆ«ï¼Ÿâ€‹
PPLåŸºäºŽæ¦‚çŽ‡è¯„ä¼°ï¼ŒBLEU/ROUGEåŸºäºŽn-gramé‡å çŽ‡ã€‚PPL åæ˜ æ¨¡åž‹å†…éƒ¨ç½®ä¿¡åº¦ï¼Œå…¶ä»–ä¸¤ä¸ªè¡¡é‡çš„æ˜¯ç”Ÿæˆæ–‡æœ¬ä¸Žå‚è€ƒæ–‡æœ¬çš„ç›¸ä¼¼åº¦



1.5 Positional Encoding ä½ç½®ç¼–ç â€‹
1.5.1 ä½ç½®ç¼–ç ä»‹ç»â€‹
â€‹
â€‹ â€‹
âœï¸
ä½ç½®ç¼–ç çš„éœ€æ±‚â€‹
RNNçš„ç»“æž„åŒ…å«äº†åºåˆ—çš„æ—¶åºä¿¡æ¯ï¼Œè€ŒTransformerå´å®Œå…¨æŠŠæ—¶åºä¿¡æ¯ç»™ä¸¢æŽ‰äº†ï¼Œæ¯”å¦‚â€œä»–æ¬ æˆ‘100ä¸‡â€ï¼Œå’Œâ€œæˆ‘æ¬ ä»–100ä¸‡â€ï¼Œä¸¤è€…çš„æ„æ€åƒå·®ä¸‡åˆ«ï¼Œæ•…ä¸ºäº†è§£å†³æ—¶åºçš„é—®é¢˜ï¼ŒTransformerçš„ä½œè€…ç”¨äº†ä¸€ä¸ªç»å¦™çš„åŠžæ³•ï¼šä½ç½®ç¼–ç (Positional Encoding)â€‹
Attentionè®¡ç®—æ˜¯æ— å‘çš„ï¼Œè€Œå„ç§ä½ç½®ä¿¡æ¯åœ¨tokensé—´çš„å…³ç³»æ˜¯å¾ˆé‡è¦çš„ã€‚å¯¹äºŽäººæ¥è¯´å¾ˆå®¹æ˜“çŸ¥é“tokensçš„ä½ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šâ€‹
â€¢
ç»å¯¹ä½ç½®ä¿¡æ¯ï¼Œa1æ˜¯ç¬¬ä¸€ä¸ªtokenï¼Œa2æ˜¯ç¬¬äºŒä¸ªtoken......â€‹
â€¢
ç›¸å¯¹ä½ç½®ä¿¡æ¯ï¼Œa2åœ¨a1çš„åŽé¢ä¸€ä½ï¼Œa4åœ¨a2çš„åŽé¢ä¸¤ä½......â€‹
â€¢
ä¸åŒä½ç½®é—´çš„è·ç¦»ï¼Œa1å’Œa3å·®ä¸¤ä¸ªä½ç½®ï¼Œa1å’Œa4å·®ä¸‰ä¸ªä½ç½®....â€‹
å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è¿™æ ·ä¸€ç§ä½ç½®è¡¨ç¤ºæ–¹å¼ï¼Œæ»¡è¶³äºŽï¼šâ€‹
â€¢
å®ƒèƒ½ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªtokenåœ¨åºåˆ—ä¸­çš„ç»å¯¹ä½ç½®â€‹
â€¢
åœ¨åºåˆ—é•¿åº¦ä¸åŒçš„æƒ…å†µä¸‹ï¼Œä¸åŒåºåˆ—ä¸­tokençš„ç›¸å¯¹ä½ç½®/è·ç¦»ä¹Ÿè¦ä¿æŒä¸€è‡´â€‹
â€¢
å¯ä»¥ç”¨æ¥è¡¨ç¤ºæ¨¡åž‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä»Žæ¥æ²¡æœ‰çœ‹åˆ°è¿‡çš„å¥å­é•¿åº¦ï¼ˆé•¿åº¦å¤–æŽ¨é—®é¢˜ï¼‰â€‹
éœ€è¦ä¸€ä¸ªæœ‰ç•Œåˆè¿žç»­çš„å‡½æ•°ï¼Œæœ€ç®€å•çš„ï¼Œæ­£å¼¦å‡½æ•°sinå°±å¯ä»¥æ»¡è¶³è¿™ä¸€ç‚¹ã€‚é¢‘çŽ‡è®¾æˆéžå¸¸ä½Žï¼Œè¿™æ ·å‡ ä¹Žä¸ä¼šæœ‰ä¸åŒTçš„ä½ç½®ç¼–ç é‡åˆçš„æƒ…å†µäº†ï¼šâ€‹
â€‹
PE 
t
â€‹
 =[sin(w 
0
â€‹
 t),sin(w 
1
â€‹
 t),â€¦,sin(w 
iâˆ’1
â€‹
 t),â€¦,sin(w 
d 
model
â€‹
 âˆ’1
â€‹
 t)]
â€‹
â€‹
w 
i
â€‹
 = 
10000 
i/(d 
model
â€‹
 âˆ’1)
 
1
â€‹
 
â€‹
â€‹ â€‹
â€‹
1.5.2 ç»å¯¹ä½ç½®ç¼–ç â€‹
Transformerçš„ä½ç½®ç¼–ç â€‹
â€‹
â€‹ â€‹
âœï¸
Transformerçš„ä½ç½®ç¼–ç åŠ åœ¨embeddingä¸Šï¼Œä½†æ˜¯ç”±äºŽä½¿ç”¨çš„æ˜¯sin cos äº¤æ›¿ï¼Œå¯ä»¥é€šè¿‡çº¿æ€§å˜æ¢çŸ©é˜µå¾—åˆ°å…¶ä»–ä½ç½®çš„è¡¨ç¤ºï¼Œæ‰€ä»¥å¯ä»¥æœŸæœ›ä»–åŒ…å«äº†ç›¸å¯¹ä½ç½®çš„ä¿¡æ¯ï¼Œè€Œä¸”ç”±äºŽä¸‰è§’å‡½æ•°æœ‰æ˜¾ç¤ºçš„ç”Ÿæˆè§„å¾‹ï¼Œæ‰€ä»¥å¯ä»¥æœŸæœ›æœ‰å¤–æŽ¨æ€§è´¨â€‹
â€¢
è®¡ç®—å…¬å¼ï¼šâ€‹
â€¢
å¯è§†åŒ–ï¼šä¸‹å›¾æ˜¯é•¿åº¦ä¸º100ï¼Œç¼–ç ç»´åº¦ä¸º512çš„åºåˆ—çš„ä½ç½®ç¼–ç å¯è§†åŒ–ï¼Œå¯ä»¥å‘çŽ°ï¼Œç”±äºŽsin/coså‡½æ•°çš„æ€§è´¨ï¼Œä½ç½®å‘é‡çš„æ¯ä¸€ä¸ªå€¼éƒ½ä½äºŽ[-1, 1]ä¹‹é—´ã€‚åŒæ—¶ï¼Œçºµå‘æ¥çœ‹ï¼Œå›¾çš„å³åŠè¾¹å‡ ä¹Žéƒ½æ˜¯é»„è‰²çš„ï¼Œè¿™æ˜¯å› ä¸ºè¶Šå¾€åŽçš„ä½ç½®ï¼Œé¢‘çŽ‡è¶Šå°ï¼Œæ³¢é•¿è¶Šé•¿ï¼Œæ‰€ä»¥ä¸åŒçš„tå¯¹æœ€ç»ˆçš„ç»“æžœå½±å“ä¸å¤§ã€‚è€Œè¶Šå¾€å·¦è¾¹èµ°ï¼Œé¢œè‰²äº¤æ›¿çš„é¢‘çŽ‡è¶Šé¢‘ç¹â€‹
â€‹ â€‹
â€‹
â€‹
â€‹ â€‹
ï¿¼
â€‹ â€‹
â€‹
â€‹
â€‹ â€‹
âœï¸
â€¢
Transformerä½ç½®ç¼–ç çš„ç¼ºç‚¹ï¼šç”±äºŽä½ç½®ç¼–ç ç‚¹ç§¯çš„æ— å‘æ€§ï¼Œ 
â€‹
PE 
t
T
â€‹
 âˆ—PE 
t+Î”t
â€‹
 =PE 
t
T
â€‹
 âˆ—PE 
tâˆ’Î”t
â€‹
 
 å³ä¸¤ä¸ªä½ç½®ç¼–ç çš„ä¹˜ç§¯ä»…å–å†³äºŽ 
â€‹
Î”T
ï¼Œè·ç¦»æ˜¯æˆå¯¹åˆ†å¸ƒçš„ï¼Œä¸èƒ½ç”¨æ¥è¡¨ç¤ºä½ç½®çš„æ–¹å‘æ€§ã€‚å½“éšç€input embeddingè¢«å–‚å…¥attentionçš„æ—¶å€™ä¼šå‡ºçŽ°è·ç¦»æ„è¯†è¢«ç ´åçš„çŽ°è±¡ï¼Œå³æ­£å¼¦ä½ç½®ç¼–ç çš„ç›¸å¯¹ä½ç½®è¡¨è¾¾èƒ½åŠ›è¢«æŠ•å½±çŸ©é˜µç ´åæŽ‰äº†ï¼Œæ‰€ä»¥åœ¨åŽç»­BERTçš„æ”¹è¿›ä¸­ï¼Œé‡‡ç”¨äº†å¯å­¦ä¹ çš„ä½ç½®ç¼–ç â€‹
â€‹ â€‹
â€‹
â€‹
â€‹ â€‹
ï¿¼
â€‹ â€‹
â€‹
â€‹
BERTçš„å¯å­¦ä¹ ä½ç½®ç¼–ç â€‹
â€‹
â€‹ â€‹
âœï¸
ç›´æŽ¥å°†ä½ç½®ç¼–ç å½“ä½œå¯è®­ç»ƒå‚æ•°ï¼Œæ¯”å¦‚æœ€å¤§é•¿åº¦ä¸º512ï¼Œç¼–ç ç»´åº¦ä¸º768ï¼Œé‚£ä¹ˆå°±åˆå§‹åŒ–ä¸€ä¸ª512Ã—768çš„çŸ©é˜µä½œä¸ºä½ç½®å‘é‡ï¼Œè®©å®ƒéšç€è®­ç»ƒè¿‡ç¨‹æ›´æ–°ã€‚å¯¹äºŽè¿™ç§è®­ç»ƒå¼çš„ç»å¯¹ä½ç½®ç¼–ç ï¼Œä¸€èˆ¬çš„è®¤ä¸ºå®ƒçš„ç¼ºç‚¹æ˜¯æ²¡æœ‰é•¿åº¦å¤–æŽ¨æ€§ï¼Œå³å¦‚æžœé¢„è®­ç»ƒæœ€å¤§é•¿åº¦ä¸º512çš„è¯ï¼Œé‚£ä¹ˆæœ€å¤šå°±åªèƒ½å¤„ç†é•¿åº¦ä¸º512çš„å¥å­ï¼Œå†é•¿å°±å¤„ç†ä¸äº†äº†ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥å°†è¶…è¿‡512çš„ä½ç½®å‘é‡éšæœºåˆå§‹åŒ–ï¼Œç„¶åŽç»§ç»­å¾®è°ƒâ€‹
å…·ä½“ç¤ºæ„è§4.1ç« â€‹â€‹
ðŸŒ²
4.1 BERTåŠå˜ä½“â€‹
â€‹ â€‹
â€‹
RNN ä½ç½®ç¼–ç â€‹
â€‹
â€‹ â€‹
âœï¸
é€’å½’å¼çš„ç»å¯¹ä½ç½®ç¼–ç ï¼ŒinputåŽé¢æŽ¥ä¸€å±‚RNNï¼Œå¯ä»¥ç”¨RNNå­¦æ¯ä¸ªä½ç½®çš„ä½ç½®ç¼–ç ã€‚ä¼˜ç‚¹æ˜¯å¤–æŽ¨ã€çµæ´»ï¼Œç¼ºç‚¹æ˜¯ä¸§å¤±transformedçš„å¹¶è¡Œå¤„ç†æ€§è´¨


1.6.1 å¤§æ¨¡åž‹ç»“æž„â€‹
â€‹
â€‹ â€‹
ðŸ—ƒï¸
é¦–å…ˆå›žé¡¾ Transformer çš„ç»“æž„å¦‚ä¸‹æ‰€ç¤ºï¼Œä¸»è¦åˆ†ä¸ºç¼–ç å™¨ Encoder å’Œè§£ç å™¨ Decoder ä¸¤éƒ¨åˆ†ï¼Œä¸”éƒ½æ˜¯å¤šå±‚å åŠ â€‹
â€¢
Encoderï¼šMHA + FFN + LN&Addï¼Œé‡‡ç”¨åŒå‘æ³¨æ„åŠ›æœºåˆ¶ï¼Œå‰åŽçš„tokenéƒ½èƒ½çœ‹åˆ°â€‹
â€¢
Decoderï¼šå…ˆæ˜¯ Masked MHA + LN&Addï¼Œå•å‘æ³¨æ„åŠ›ï¼Œå½“å‰tokenåªèƒ½çœ‹åˆ°è‡ªå·±ä¹‹å‰çš„tokenï¼Œé˜²æ­¢æœªæ¥ä¿¡æ¯æ³„éœ²ï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ªtokenåªèƒ½åˆ©ç”¨ä¹‹å‰çš„ä¿¡æ¯ï¼Œç„¶åŽæŽ¥ä¸Š Cross MHAï¼ˆEncoder-Decoder Attention Layerï¼‰ï¼Œé€šè¿‡ç¼–ç å™¨è¾“å‡ºçš„ä¸Šä¸‹æ–‡ä¿¡æ¯æ¥å…³æ³¨è§£ç å™¨è¿™é‡Œçš„åºåˆ—çš„ç›¸å…³éƒ¨åˆ†ï¼Œæœ€åŽè§£ç å™¨ç”Ÿæˆä¸Žè¾“å…¥åŒ¹é…çš„è¾“å‡ºåºåˆ—


10.1.1 åŸºç¡€é—®é¢˜â€‹
1.
Pythonæ•°æ®ç±»åž‹ï¼šè¯·è§£é‡ŠPythonä¸­çš„å¸¸è§æ•°æ®ç±»åž‹ï¼Œå¦‚åˆ—è¡¨ã€å…ƒç»„ã€é›†åˆå’Œå­—å…¸ã€‚å®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿâ€‹
â—¦
åˆ—è¡¨ï¼ˆListï¼‰ï¼šæœ‰åºä¸”å¯å˜çš„æ•°æ®é›†åˆï¼Œä½¿ç”¨æ–¹æ‹¬å·[]è¡¨ç¤ºã€‚â€‹
â—¦
å…ƒç»„ï¼ˆTupleï¼‰ï¼šæœ‰åºä¸”ä¸å¯å˜çš„æ•°æ®é›†åˆï¼Œä½¿ç”¨åœ†æ‹¬å·()è¡¨ç¤ºã€‚æ­¤å¤–ä¸å¯å˜å¯¹è±¡è¿˜æœ‰stringã€intã€floatã€boolâ€‹
â—¦
é›†åˆï¼ˆSetï¼‰ï¼šæ— åºä¸”ä¸é‡å¤çš„æ•°æ®é›†åˆï¼Œä½¿ç”¨èŠ±æ‹¬å·{}è¡¨ç¤ºã€‚â€‹
â—¦
å­—å…¸ï¼ˆDictionaryï¼‰ï¼šé”®å€¼å¯¹çš„æ— åºé›†åˆï¼Œä½¿ç”¨èŠ±æ‹¬å·{}è¡¨ç¤ºï¼Œé”®æ˜¯å”¯ä¸€çš„ã€‚â€‹
2.
åˆ—è¡¨ä¸Žå…ƒç»„çš„åŒºåˆ«ï¼šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½ ä¼šé€‰æ‹©ä½¿ç”¨åˆ—è¡¨è€Œä¸æ˜¯å…ƒç»„ï¼Œåä¹‹äº¦ç„¶ï¼Ÿâ€‹
â—¦
åˆ—è¡¨ï¼šå¯å˜ï¼Œæ”¯æŒå¢žåˆ æ”¹æ“ä½œï¼Œé€‚åˆéœ€è¦é¢‘ç¹ä¿®æ”¹çš„æ•°æ®ã€‚â€‹
â—¦
å…ƒç»„ï¼šä¸å¯å˜ï¼Œåˆ›å»ºåŽæ— æ³•ä¿®æ”¹ï¼Œé€‚åˆå­˜å‚¨ä¸å¯å˜çš„æ•°æ®ï¼Œä¸”å› ä¸ºä¸å¯å˜ï¼Œæ‰€ä»¥é€Ÿåº¦æ¯”åˆ—è¡¨æ›´å¿«ã€‚â€‹
3.
å­—ç¬¦ä¸²æ“ä½œï¼šå¦‚ä½•åè½¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Ÿè¯·å†™å‡ºç›¸åº”çš„Pythonä»£ç ã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
â€‹ â€‹
â€‹
4.
==å’Œisæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿâ€‹
â—¦
ä½¿ç”¨==æ“ä½œç¬¦æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å€¼æ˜¯å¦ç›¸ç­‰ã€‚â€‹
â—¦
ä½¿ç”¨isæ“ä½œç¬¦æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼ˆå³æ˜¯å¦æœ‰ç›¸åŒçš„å†…å­˜åœ°å€ï¼‰â€‹
5.
pythonæ˜¯ä¸€ç§åŠ¨æ€è¯­è¨€â€‹
åŠ¨æ€ç±»åž‹ï¼šåœ¨Pythonä¸­ï¼Œå˜é‡çš„ç±»åž‹æ˜¯åœ¨è¿è¡Œæ—¶å†³å®šçš„ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶å†³å®šçš„ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ”¹å˜å˜é‡çš„ç±»åž‹ã€‚â€‹
åŠ¨æ€ç±»åž‹æ£€æŸ¥ï¼šç±»åž‹æ£€æŸ¥æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œçš„ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶è¿›è¡Œçš„ã€‚è¿™ä½¿å¾—Pythonä»£ç æ›´åŠ çµæ´»ï¼Œä½†ä¹Ÿæ„å‘³ç€ä¸€äº›ç±»åž‹é”™è¯¯å¯èƒ½åªä¼šåœ¨è¿è¡Œæ—¶è¢«å‘çŽ°ã€‚â€‹
åŠ¨æ€å†…å­˜ç®¡ç†ï¼šPythonä½¿ç”¨åžƒåœ¾å›žæ”¶æœºåˆ¶æ¥è‡ªåŠ¨ç®¡ç†å†…å­˜ã€‚è¿™ç§åŠ¨æ€çš„å†…å­˜ç®¡ç†æ–¹å¼ä½¿å¾—ç¨‹åºå‘˜ä¸éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾ã€‚â€‹
ä¸Žé™æ€è¯­è¨€çš„å¯¹æ¯”â€‹
é™æ€è¯­è¨€ï¼ˆå¦‚Cã€C++ã€Javaç­‰ï¼‰åœ¨ç¼–è¯‘æ—¶å°±éœ€è¦ç¡®å®šå˜é‡çš„ç±»åž‹ï¼Œå¹¶ä¸”åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¿›è¡Œç±»åž‹æ£€æŸ¥ã€‚é™æ€è¯­è¨€çš„è¿™ç§ç‰¹æ€§å¯ä»¥åœ¨ç¼–è¯‘æ—¶æ•æ‰åˆ°æ›´å¤šçš„é”™è¯¯ï¼Œæé«˜ç¨‹åºçš„å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚â€‹
åŠ¨æ€è¯­è¨€çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿â€‹
ä¼˜åŠ¿â€‹
a.
çµæ´»æ€§ï¼šåŠ¨æ€è¯­è¨€å…è®¸æ›´çµæ´»çš„ç¼–ç¨‹é£Žæ ¼ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘å’ŒåŽŸåž‹è®¾è®¡ã€‚â€‹
b.
ä»£ç ç®€æ´ï¼šç”±äºŽæ²¡æœ‰ç±»åž‹å£°æ˜Žï¼Œä»£ç æ›´åŠ ç®€æ´ï¼Œå‡å°‘äº†ä»£ç é‡ã€‚â€‹
c.
æ˜“äºŽè°ƒè¯•ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°æ£€æŸ¥å’Œä¿®æ”¹å¯¹è±¡ï¼Œæœ‰åŠ©äºŽè°ƒè¯•å’Œå¼€å‘ã€‚â€‹
åŠ£åŠ¿â€‹
a.
è¿è¡Œæ—¶é”™è¯¯ï¼šç±»åž‹é”™è¯¯å’Œå…¶ä»–é—®é¢˜åªæœ‰åœ¨è¿è¡Œæ—¶æ‰ä¼šè¢«å‘çŽ°ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºåœ¨è¿è¡Œæ—¶å´©æºƒã€‚â€‹
b.
æ€§èƒ½ï¼šç”±äºŽåŠ¨æ€ç±»åž‹æ£€æŸ¥å’Œå…¶ä»–åŠ¨æ€ç‰¹æ€§ï¼ŒåŠ¨æ€è¯­è¨€çš„è¿è¡Œé€Ÿåº¦é€šå¸¸æ¯”é™æ€è¯­è¨€æ…¢ã€‚â€‹
Pythonæ˜¯ä¸€ç§åŠ¨æ€è¯­è¨€ï¼Œå› ä¸ºå®ƒåœ¨è¿è¡Œæ—¶æ‰ç¡®å®šå˜é‡çš„ç±»åž‹ï¼Œå¹¶è¿›è¡Œç±»åž‹æ£€æŸ¥ã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—Pythonçµæ´»ä¸”æ˜“äºŽä½¿ç”¨ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘å’ŒåŽŸåž‹è®¾è®¡ï¼Œä½†ä¹Ÿå¸¦æ¥äº†è¿è¡Œæ—¶é”™è¯¯å’Œæ€§èƒ½æ–¹é¢çš„æŒ‘æˆ˜ã€‚â€‹
6.
æ‹·è´å’Œæ·±æ‹·è´ï¼Ÿâ€‹
â—¦
ç›´æŽ¥èµ‹å€¼ï¼šå…¶å®žå°±æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼ˆåˆ«åï¼‰ã€‚â€‹
â—¦
Pythonä¸­å¯¹è±¡çš„èµ‹å€¼éƒ½æ˜¯è¿›è¡Œå¯¹è±¡å¼•ç”¨ï¼ˆå†…å­˜åœ°å€ï¼‰ä¼ é€’ã€‚â€‹
â—¦
ä½¿ç”¨copy.copy()ï¼Œå¯ä»¥è¿›è¡Œå¯¹è±¡çš„æµ…æ‹·è´ï¼Œå®ƒå¤åˆ¶äº†å¯¹è±¡ï¼Œä½†å¯¹äºŽå¯¹è±¡ä¸­çš„å…ƒç´ ï¼Œä¾ç„¶ä½¿ç”¨åŽŸå§‹çš„å¼•ç”¨ã€‚â€‹
â—¦
å¦‚æžœéœ€è¦å¤åˆ¶ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œä»¥åŠå®ƒé‡Œé¢çš„æ‰€æœ‰å…ƒç´ ï¼ˆåŒ…å«å…ƒç´ çš„å­å…ƒç´ ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨copy.deepcopy()è¿›è¡Œæ·±æ‹·è´ã€‚â€‹
â—¦
å¯¹äºŽéžå®¹å™¨ç±»åž‹ï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€å’Œå…¶ä»–'åŽŸå­'ç±»åž‹çš„å¯¹è±¡ï¼‰æ²¡æœ‰è¢«æ‹·è´ä¸€è¯´ã€‚â€‹
â—¦
å¦‚æžœå…ƒç»„å˜é‡åªåŒ…å«åŽŸå­ç±»åž‹å¯¹è±¡ï¼Œåˆ™ä¸èƒ½æ·±æ‹·è´ã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼import copyâ€‹
a = [1, 2, 3, 4, ['a', 'b']]â€‹
b = a #èµ‹å€¼ï¼Œä¼ å¯¹è±¡çš„å¼•ç”¨â€‹
c = copy.copy(a) #æµ…æ‹·è´ï¼Œå¯¹è±¡æ‹·è´â€‹
d = copy.deepcopy(a) #æ·±æ‹·è´ï¼Œå¯¹è±¡æ‹·è´â€‹
 â€‹
a.append(5) #ä¿®æ”¹å¯¹è±¡a,åˆ—è¡¨æœ«å°¾æ·»åŠ æ•°å­—5â€‹
a[4].append('c') #ä¿®æ”¹å¯¹è±¡aä¸­çš„åˆ—è¡¨['a', 'b']â€‹
 â€‹
print 'a= ', aâ€‹
print 'b= ', bâ€‹
print 'c= ', câ€‹
print 'd= ', dâ€‹
 â€‹
è¾“å‡ºç»“æžœï¼šâ€‹
a = [1, 2, 3, 4, ['a', 'b', 'c'], 5] #ä¿®æ”¹äº†åŽŸå§‹å¯¹è±¡ï¼Œå˜ä¸ºä¿®æ”¹åŽçš„åˆ—è¡¨â€‹
b = [1, 2, 3, 4, ['a', 'b', 'c'], 5] #å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯¹è±¡çš„ä»»ä½•å€¼å˜åŒ–éƒ½éšç€å˜åŒ–â€‹
c = [1, 2, 3, 4, ['a', 'b', 'c']] #æµ…æ‹·è´ï¼Œä¸å¯å˜å…ƒç´ ä¸èƒ½æ”¹å˜ï¼Œå¯å˜å…ƒç´ éšç€åŽŸå§‹å¯¹çš„å˜åŒ–è€Œå˜åŒ–äº†â€‹
d = [1, 2, 3, 4, ['a', 'b']] #æ·±
â€‹ â€‹
â€‹
7.
*Args ä¸Ž **kwargsï¼Ÿâ€‹
â—¦
*argsæ˜¯å¯å˜çš„positional argumentsåˆ—è¡¨ï¼Œ**kwargsæ˜¯å¯å˜çš„keyword argumentsåˆ—è¡¨;â€‹
â—¦
*argså¿…é¡»ä½äºŽ**kwargsä¹‹å‰ï¼Œå› ä¸ºpositional argumentså¿…é¡»ä½äºŽkeyword argumentsä¹‹å‰;â€‹
â—¦
*argsè¡¨ç¤ºä»»ä½•å¤šä¸ªæ— åå‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªtupleï¼›**kwargsè¡¨ç¤ºå…³é”®å­—å‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªdictã€‚â€‹
8.
ç®€è¿°pythonæ˜¯ä¸€ç§è§£é‡Šè¯­è¨€å—ï¼Ÿâ€‹
a.
é€è¡Œæ‰§è¡Œï¼šè§£é‡Šåž‹è¯­è¨€åœ¨è¿è¡Œæ—¶é€è¡Œè§£é‡Šä»£ç ï¼Œè¿™æ„å‘³ç€æºä»£ç ä¸éœ€è¦å…ˆç¼–è¯‘æˆäºŒè¿›åˆ¶çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚Pythonä»£ç åœ¨æ‰§è¡Œæ—¶è¢«è§£é‡Šå™¨ï¼ˆå¦‚CPythonã€PyPyç­‰ï¼‰é€è¡Œç¿»è¯‘æˆæœºå™¨ç å¹¶ç«‹å³æ‰§è¡Œã€‚â€‹
b.
è·¨å¹³å°æ€§ï¼šç”±äºŽPythonä»£ç ç”±è§£é‡Šå™¨æ‰§è¡Œï¼Œåªè¦æœ‰ç›¸åº”çš„Pythonè§£é‡Šå™¨ï¼Œå°±å¯ä»¥åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸Šè¿è¡ŒåŒæ ·çš„Pythonä»£ç ã€‚è¿™ä½¿å¾—Pythonå…·æœ‰å¾ˆå¥½çš„è·¨å¹³å°æ€§ã€‚â€‹
c.
å¼€å‘æ•ˆçŽ‡é«˜ï¼šç”±äºŽä¸éœ€è¦ç¼–è¯‘æ­¥éª¤ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°ç¼–å†™å’Œæµ‹è¯•ä»£ç ï¼Œä»Žè€Œæé«˜å¼€å‘æ•ˆçŽ‡ã€‚â€‹
d.
åŠ¨æ€ç±»åž‹ï¼šPythonæ˜¯åŠ¨æ€ç±»åž‹è¯­è¨€ï¼Œå˜é‡çš„ç±»åž‹åœ¨è¿è¡Œæ—¶å†³å®šï¼Œè¿™ä¸Žè§£é‡Šåž‹è¯­è¨€çš„åŠ¨æ€ç‰¹æ€§ç›¸å»åˆã€‚â€‹
e.
å³æ—¶æ‰§è¡Œï¼šPythonä»£ç åœ¨è¿è¡Œæ—¶ç”±è§£é‡Šå™¨é€è¡Œè§£é‡Šæ‰§è¡Œï¼Œæ— éœ€æå‰ç¼–è¯‘ã€‚â€‹
9.
pythonçš„å‚æ•°è½¬é€’ï¼šâ€‹
 ä½ç½®å‚æ•°ã€å…³é”®å­—å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜é•¿åº¦å‚æ•°â€‹
10.
é™æ€æ–¹æ³•å’Œç±»æ–¹æ³•ï¼šâ€‹
â—¦
@staticmethodï¼šâ€‹
â–ª
ä¸éœ€è¦è®¿é—®ç±»å®žä¾‹æˆ–ç±»æœ¬èº«ã€‚â€‹
â–ª
å¯ä»¥é€šè¿‡ç±»æˆ–å®žä¾‹è°ƒç”¨ã€‚â€‹
â–ª
ç”¨äºŽå®žçŽ°ä¸Žç±»ç›¸å…³ä½†ä¸éœ€è¦è®¿é—®ç±»æˆ–å®žä¾‹çš„åŠŸèƒ½ã€‚â€‹
â—¦
@classmethodï¼šâ€‹
â–ª
ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»å¯¹è±¡ï¼ˆclsï¼‰ã€‚â€‹
â–ª
å¯ä»¥é€šè¿‡ç±»æˆ–å®žä¾‹è°ƒç”¨ã€‚â€‹
â–ª
ç”¨äºŽè®¿é—®å’Œä¿®æ”¹ç±»çŠ¶æ€ï¼Œæˆ–è€…å®žçŽ°ä¸€äº›ä¸Žç±»ç›¸å…³çš„æ“ä½œâ€‹
11.
pythonç±»å˜é‡å’Œå®žä¾‹å˜é‡â€‹
12.
å­—å…¸æŽ¨å¯¼å¼ï¼šâ€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼{key_expr: value_expr for item in iterable if condition}â€‹
keys = ['a', 'b', 'c']â€‹
values = [1, 2, 3]â€‹
dictionary = {k: v for k, v in zip(keys, values)}â€‹
print(dictionary)  # è¾“å‡ºï¼š{'a': 1, 'b': 2, 'c': 3}
â€‹ â€‹
â€‹
13.
ä»€ä¹ˆæ˜¯pythonå‡½æ•°å¼ç¼–ç¨‹ï¼Ÿâ€‹
å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒæŠŠè®¡ç®—è§†ä¸ºæ•°å­¦å‡½æ•°çš„æ±‚å€¼ï¼Œé¿å…äº†ä½¿ç”¨çŠ¶æ€å’Œå¯å˜æ•°æ®ã€‚å‡½æ•°å¼ç¼–ç¨‹å¼ºè°ƒå‡½æ•°çš„ä½¿ç”¨ï¼Œå¹¶ä¸”å‡½æ•°è¢«è§†ä¸ºç¬¬ä¸€ç±»å¯¹è±¡ï¼ˆfirst-class citizensï¼‰ï¼Œè¿™æ„å‘³ç€å‡½æ•°å¯ä»¥èµ‹å€¼ç»™å˜é‡ã€ä½œä¸ºå‚æ•°ä¼ é€’ä»¥åŠä½œä¸ºè¿”å›žå€¼ã€‚â€‹
Pythonè™½ç„¶ä¸æ˜¯çº¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œä½†å®ƒæ”¯æŒè®¸å¤šå‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§å’Œæ¦‚å¿µã€‚mapå¯¹å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ¯ä¸ªå…ƒç´ åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªè¿­ä»£å™¨ã€‚â€‹
â—¦
å‡½æ•°å¯ä»¥åƒå˜é‡ä¸€æ ·ä¼ é€’å’Œæ“ä½œã€‚â€‹
â—¦
å‡½æ•°å¯ä»¥æŽ¥å—å…¶ä»–å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…è¿”å›žä¸€ä¸ªå‡½æ•°ã€‚â€‹
â—¦
ä½¿ç”¨lambdaå…³é”®å­—å®šä¹‰åŒ¿åå‡½æ•°ã€‚â€‹
14.
æ¨¡å—å’ŒåŒ…ï¼šæ¨¡å—æ˜¯åŒ…å«Pythonä»£ç çš„æ–‡ä»¶ï¼ŒåŒ…æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ç›®å½•â€‹
15.
pickling:è½¬æ¢ä¸ºå­—èŠ‚æµï¼Œpickle.dumpï¼Œunpickling:é€†è¿ç®—ï¼Œpickle.loadâ€‹
16.
rangeè¿”å›žä¸€ä¸ªæƒ°æ€§åºåˆ—ï¼Œä¸ä¼šä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ•°éƒ½ç”Ÿæˆäº†â€‹
17.
reduceå‡½æ•°ï¼šreduceå‡½æ•°ä¼šå¯¹åºåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œç´¯ç§¯æ“ä½œï¼Œä»Žè€Œå°†åºåˆ—ç®€åŒ–ä¸ºå•ä¸€çš„å€¼ã€‚å®ƒé€šè¿‡åå¤è°ƒç”¨æŒ‡å®šçš„äºŒå…ƒå‡½æ•°ï¼Œå°†åºåˆ—ä¸­çš„å‰ä¸¤ä¸ªå…ƒç´ ä¼ é€’ç»™è¯¥å‡½æ•°ï¼Œç„¶åŽå°†è¯¥å‡½æ•°çš„ç»“æžœä¸Žä¸‹ä¸€ä¸ªå…ƒç´ ä¸€èµ·ä¼ é€’ç»™å‡½æ•°ï¼Œå¦‚æ­¤å¾€å¤ï¼Œç›´åˆ°åºåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è¢«å¤„ç†å®Œã€‚â€‹
18.
filterå‡½æ•°ï¼šè¿”å›žçš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨â€‹
19.
Pythonæ˜¯æŒ‰å¼•ç”¨è°ƒç”¨è¿˜æ˜¯æŒ‰ç…§å€¼è°ƒç”¨ï¼Ÿ:â€‹
a.
å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡ï¼šâ€‹
â–ª
å¯å˜å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å­—å…¸ã€é›†åˆç­‰ï¼‰ï¼šåœ¨å‡½æ•°å†…éƒ¨å¯¹å¯å˜å¯¹è±¡çš„ä¿®æ”¹ä¼šå½±å“åˆ°åŽŸå§‹å¯¹è±¡ã€‚â€‹
â–ª
ä¸å¯å˜å¯¹è±¡ï¼ˆå¦‚æ•´æ•°ã€å­—ç¬¦ä¸²ã€å…ƒç»„ç­‰ï¼‰ï¼šåœ¨å‡½æ•°å†…éƒ¨å¯¹ä¸å¯å˜å¯¹è±¡çš„ä»»ä½•æ“ä½œä¸ä¼šå½±å“åˆ°åŽŸå§‹å¯¹è±¡ï¼Œå› ä¸ºè¿™äº›æ“ä½œå®žé™…ä¸Šä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚â€‹
b.
å‚æ•°ä¼ é€’æœºåˆ¶ï¼šâ€‹
â–ª
å½“ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œå®žé™…ä¸Šæ˜¯ä¼ é€’äº†è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼ˆå³å¯¹è±¡çš„å†…å­˜åœ°å€ï¼‰ã€‚â€‹
â–ª
å¦‚æžœä¼ é€’çš„æ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡ï¼Œåœ¨å‡½æ•°å†…éƒ¨å¯¹è¿™ä¸ªå¯¹è±¡çš„ä¿®æ”¹ä¼šå½±å“åˆ°åŽŸå§‹å¯¹è±¡ï¼Œå› ä¸ºå‡½æ•°å†…éƒ¨å’Œå¤–éƒ¨çš„å˜é‡éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚â€‹
â–ª
å¦‚æžœä¼ é€’çš„æ˜¯ä¸€ä¸ªä¸å¯å˜å¯¹è±¡ï¼Œåœ¨å‡½æ•°å†…éƒ¨å¯¹è¿™ä¸ªå¯¹è±¡çš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°åŽŸå§‹å¯¹è±¡ï¼Œå› ä¸ºä»»ä½•ä¿®æ”¹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè€Œä¸ä¼šæ”¹å˜åŽŸæœ‰å¯¹è±¡ã€‚â€‹
20.
any()æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸€ä¸ªTrueï¼Œall()æ£€æŸ¥æ˜¯å¦éƒ½æ˜¯Trueâ€‹
21.
Pythonå¦‚ä½•å°†ä¸¤ä¸ªåˆ—è¡¨ç»„åˆæˆä¸€ä¸ªå…ƒç»„åˆ—è¡¨ï¼Ÿlist(zip(list1, list2))â€‹
22.
åˆ é™¤ç›¸å…³ï¼šâ€‹
â—¦
removeï¼šâ€‹
â–ª
ç”¨äºŽåˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ ã€‚â€‹
â–ª
æŒ‰å€¼åˆ é™¤ï¼Œä¸è¿”å›žè¢«åˆ é™¤çš„å…ƒç´ ã€‚â€‹
â–ª
å¦‚æžœå…ƒç´ ä¸å­˜åœ¨ï¼Œä¼šå¼•å‘ ValueErrorã€‚â€‹
â—¦
delï¼šâ€‹
â–ª
ç”¨äºŽåˆ é™¤æŒ‡å®šç´¢å¼•çš„å…ƒç´ ã€åˆ‡ç‰‡èŒƒå›´ï¼Œæˆ–æ•´ä¸ªåˆ—è¡¨ã€‚â€‹
â–ª
ä¸è¿”å›žè¢«åˆ é™¤çš„å…ƒç´ ã€‚â€‹
â–ª
å¦‚æžœç´¢å¼•è¶…å‡ºèŒƒå›´ï¼Œä¼šå¼•å‘ IndexErrorã€‚â€‹
â—¦
popï¼šâ€‹
â–ª
ç”¨äºŽåˆ é™¤å¹¶è¿”å›žæŒ‡å®šç´¢å¼•çš„å…ƒç´ ï¼Œé»˜è®¤æ˜¯æœ€åŽä¸€ä¸ªå…ƒç´ ã€‚â€‹
â–ª
è¿”å›žè¢«åˆ é™¤çš„å…ƒç´ ã€‚â€‹
â–ª
å¦‚æžœç´¢å¼•è¶…å‡ºèŒƒå›´ï¼Œä¼šå¼•å‘ IndexErrorã€‚â€‹
23.
å¯è¿­ä»£å¯¹è±¡å’Œè¿­ä»£å™¨ï¼šâ€‹
å¯è¿­ä»£å¯¹è±¡ï¼ˆIterableï¼‰â€‹
â—¦
å®šä¹‰ï¼šå¯è¿­ä»£å¯¹è±¡æ˜¯ä¸€ä¸ªå¯ä»¥è¿”å›žè¿­ä»£å™¨çš„å¯¹è±¡ã€‚ä»»ä½•å®žçŽ°äº† iter() æˆ–è€… getitem() æ–¹æ³•çš„å¯¹è±¡éƒ½æ˜¯å¯è¿­ä»£çš„ã€‚â€‹
â—¦
ä¾‹å­ï¼šå¸¸è§çš„å¯è¿­ä»£å¯¹è±¡åŒ…æ‹¬åˆ—è¡¨ï¼ˆlistï¼‰ã€å…ƒç»„ï¼ˆtupleï¼‰ã€é›†åˆï¼ˆsetï¼‰ã€å­—å…¸ï¼ˆdictionaryï¼‰ã€å­—ç¬¦ä¸²ï¼ˆstringï¼‰ç­‰ã€‚â€‹
è¿­ä»£å™¨ï¼ˆIteratorï¼‰â€‹
â—¦
å®šä¹‰ï¼šè¿­ä»£å™¨æ˜¯ä¸€ä¸ªå®žçŽ°äº† iter() å’Œ next() æ–¹æ³•çš„å¯¹è±¡ã€‚è¿­ä»£å™¨å¯¹è±¡èƒ½å¤Ÿè®°ä½éåŽ†çš„ä½ç½®ï¼Œnext() æ–¹æ³•è¿”å›žä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æžœæ²¡æœ‰å…ƒç´ åˆ™å¼•å‘ StopIteration å¼‚å¸¸ã€‚â€‹
â—¦
åˆ›å»ºæ–¹æ³•ï¼šé€šè¿‡è°ƒç”¨å¯è¿­ä»£å¯¹è±¡çš„ iter() æ–¹æ³•ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨ã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
â€‹ â€‹my_list = [1, 2, 3, 4]â€‹
# èŽ·å–è¿­ä»£å™¨å¯¹è±¡â€‹
my_iterator = iter(my_list)â€‹
# ä½¿ç”¨è¿­ä»£å™¨é€ä¸ªè®¿é—®å…ƒç´ â€‹
print(next(my_iterator))  # è¾“å‡ºï¼š1â€‹
print(next(my_iterator))  # è¾“å‡ºï¼š2â€‹
print(next(my_iterator))  # è¾“å‡ºï¼š3â€‹
print(next(my_iterator))  # è¾“å‡ºï¼š4
â€‹
24.
å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç»„ã€å­—å…¸æ¯ä¸ªæœ€å¸¸ç”¨çš„äº”ä¸ªæ–¹æ³•ï¼Ÿâ€‹
   å­—ç¬¦ä¸²ï¼šsplitã€joinã€stripã€replaceã€findâ€‹
   åˆ—è¡¨ï¼šappendã€extendã€popã€removeã€sortâ€‹
   å…ƒç»„ï¼šcountã€indexâ€‹
   å­—å…¸ï¼šgetã€keysã€valuesã€itemsã€updateâ€‹
25.
ç®€è¿°Pythonå¤šçº¿ç¨‹å…±åŒæ“ä½œåŒä¸€ä¸ªæ•°æ®äº’æ–¥é”åŒæ­¥ï¼Ÿâ€‹
 åœ¨Pythonä¸­ï¼Œå¤šçº¿ç¨‹æ“ä½œåŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œä¸ºäº†é¿å…ç«žäº‰æ¡ä»¶å’Œæ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨äº’æ–¥é”ï¼ˆMutex Lockï¼‰æ¥åŒæ­¥çº¿ç¨‹çš„è®¿é—®ã€‚äº’æ–¥é”ç¡®ä¿åœ¨ä»»ä½•æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè®¿é—®å…±äº«èµ„æºï¼Œä»Žè€Œä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚äº’æ–¥é”æ˜¯ä¸€ç§åŒæ­¥åŽŸè¯­ï¼Œç”¨äºŽä¿æŠ¤å…±äº«èµ„æºã€‚äº’æ–¥é”ç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®å…±äº«èµ„æºã€‚Pythonçš„threadingæ¨¡å—æä¾›äº†Lockç±»æ¥å®žçŽ°äº’æ–¥é”ã€‚â€‹
a.
åˆ›å»ºé”å¯¹è±¡ï¼šä½¿ç”¨threading.Lock()åˆ›å»ºä¸€ä¸ªé”å¯¹è±¡ã€‚â€‹
b.
èŽ·å–é”ï¼šåœ¨çº¿ç¨‹è®¿é—®å…±äº«èµ„æºä¹‹å‰ï¼Œä½¿ç”¨lock.acquire()èŽ·å–é”ã€‚â€‹
c.
é‡Šæ”¾é”ï¼šåœ¨çº¿ç¨‹è®¿é—®å…±äº«èµ„æºä¹‹åŽï¼Œä½¿ç”¨lock.release()é‡Šæ”¾é”ã€‚â€‹
â—¦
é¿å…æ­»é”ï¼šç¡®ä¿æ¯æ¬¡æˆåŠŸèŽ·å–é”åŽéƒ½èƒ½é‡Šæ”¾é”ï¼Œä»¥é¿å…æ­»é”æƒ…å†µã€‚ä½¿ç”¨try-finallyå—ç¡®ä¿é”çš„é‡Šæ”¾ã€‚â€‹
26.
Pythonçº¿ç¨‹åŒæ­¥ï¼šåœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œçº¿ç¨‹åŒæ­¥æ˜¯ç¡®ä¿å¤šä¸ªçº¿ç¨‹æ­£ç¡®ã€é¡ºåºåœ°è®¿é—®å…±äº«èµ„æºçš„é‡è¦æœºåˆ¶ã€‚Pythonæä¾›äº†å¤šç§çº¿ç¨‹åŒæ­¥åŽŸè¯­æ¥è§£å†³å¤šçº¿ç¨‹ç«žäº‰å’Œæ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜â€‹
â—¦
äº’æ–¥é”ï¼ˆLockï¼‰ï¼šç”¨äºŽä¿æŠ¤å…±äº«èµ„æºï¼Œç¡®ä¿åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®ã€‚â€‹
â—¦
å¯é‡å…¥é”ï¼ˆRLockï¼‰ï¼šå…è®¸åŒä¸€çº¿ç¨‹å¤šæ¬¡èŽ·å–é”ï¼Œé€‚ç”¨äºŽé€’å½’è°ƒç”¨ã€‚â€‹
â—¦
ä¿¡å·é‡ï¼ˆSemaphoreï¼‰ï¼šæŽ§åˆ¶å¯¹èµ„æºçš„è®¿é—®é‡ï¼Œé€‚ç”¨äºŽé™åˆ¶å¹¶å‘çº¿ç¨‹æ•°ã€‚â€‹
â—¦
æ¡ä»¶å˜é‡ï¼ˆConditionï¼‰ï¼šç”¨äºŽçº¿ç¨‹é—´çš„é€šä¿¡å’ŒåŒæ­¥ï¼Œé€‚ç”¨äºŽå¤æ‚çš„ç­‰å¾…å’Œé€šçŸ¥æœºåˆ¶ã€‚â€‹
â—¦
äº‹ä»¶ï¼ˆEventï¼‰ï¼šç”¨äºŽçº¿ç¨‹é—´çš„ç®€å•åŒæ­¥å’Œç­‰å¾…äº‹ä»¶çš„å‘ç”Ÿã€‚â€‹
27.
Pythonæ­»é”ï¼šæ­»é”ï¼ˆDeadlockï¼‰æ˜¯å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹ç¼–ç¨‹ä¸­çš„ä¸€ç§çŽ°è±¡ï¼ŒæŒ‡çš„æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹æˆ–è¿›ç¨‹å› ç›¸äº’ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºè€Œé™·å…¥æ— é™æœŸç­‰å¾…çš„çŠ¶æ€ã€‚æ¢å¥è¯è¯´ï¼Œæ­»é”å‘ç”Ÿæ—¶ï¼Œè¿™äº›çº¿ç¨‹æˆ–è¿›ç¨‹éƒ½æ— æ³•ç»§ç»­æ‰§è¡Œï¼Œå› ä¸ºæ¯ä¸€ä¸ªéƒ½åœ¨ç­‰å¾…å…¶ä»–çº¿ç¨‹æˆ–è¿›ç¨‹æŒæœ‰çš„èµ„æºã€‚â€‹
a.
é¿å…çŽ¯è·¯ç­‰å¾…æ¡ä»¶ï¼šé€šè¿‡ä¸€æ¬¡æ€§èŽ·å–æ‰€æœ‰éœ€è¦çš„é”ï¼Œé¿å…çŽ¯è·¯ç­‰å¾…ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªæŽ’åºçš„ç­–ç•¥ï¼Œç¡®ä¿æ‰€æœ‰çº¿ç¨‹æŒ‰ç…§ç›¸åŒçš„é¡ºåºèŽ·å–é”ã€‚â€‹
b.
ä½¿ç”¨è¶…æ—¶ï¼šåœ¨å°è¯•èŽ·å–é”æ—¶ä½¿ç”¨è¶…æ—¶å‚æ•°ï¼Œä»¥é¿å…æ— é™æœŸç­‰å¾…ã€‚â€‹
â—¦
çº¿ç¨‹å®‰å…¨ï¼šåœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸­ï¼Œç¨‹åºèƒ½æ­£ç¡®æ‰§è¡Œï¼Œä¸ä¼šå› å¹¶å‘æ“ä½œå¯¼è‡´ä¸ä¸€è‡´æˆ–é”™è¯¯ã€‚â€‹
â—¦
äº’æ–¥é”ï¼ˆMutex Lockï¼‰ï¼šä¸€ç§åŒæ­¥åŽŸè¯­ï¼Œç”¨äºŽä¿æŠ¤å…±äº«èµ„æºï¼Œç¡®ä¿åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®èµ„æºã€‚é€šè¿‡lock.acquire()å’Œlock.release()æ“ä½œæŽ§åˆ¶çº¿ç¨‹å¯¹èµ„æºçš„è®¿é—®ã€‚â€‹
â—¦
å®žçŽ°çº¿ç¨‹å®‰å…¨çš„æ›¿ä»£æ–¹æ¡ˆï¼šä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„æ•°æ®ç»“æž„ã€é«˜å±‚æ¬¡çš„å¹¶å‘å·¥å…·ï¼Œæˆ–é¿å…å…±äº«çŠ¶æ€ç­‰ã€‚â€‹
â—¦
è¿›ç¨‹ï¼šâ€‹
â–ª
å¹¶å‘ï¼šåœ¨å•æ ¸å¤„ç†å™¨ä¸Šï¼Œé€šè¿‡ä»»åŠ¡åˆ‡æ¢å®žçŽ°ã€‚â€‹
â–ª
å¹¶è¡Œï¼šåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šï¼Œé€šè¿‡åœ¨ä¸åŒå¤„ç†å™¨æ ¸å¿ƒä¸ŠåŒæ—¶è¿è¡Œå¤šä¸ªè¿›ç¨‹å®žçŽ°ã€‚â€‹
â—¦
çº¿ç¨‹ï¼šâ€‹
â–ª
å¹¶å‘ï¼šåœ¨å•æ ¸å¤„ç†å™¨ä¸Šï¼Œé€šè¿‡ä»»åŠ¡åˆ‡æ¢å®žçŽ°ã€‚â€‹
â–ª
å¹¶è¡Œï¼šåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šï¼Œé€šè¿‡åœ¨ä¸åŒå¤„ç†å™¨æ ¸å¿ƒä¸ŠåŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹å®žçŽ°ï¼Œä½†å—é™äºŽPythonçš„GILï¼ŒçœŸæ­£çš„å¹¶è¡Œä»…é™äºŽI/Oå¯†é›†åž‹ä»»åŠ¡ã€‚â€‹
28.
Python asyncio:asyncio æ˜¯ Python ä¸­ç”¨äºŽç¼–å†™å¹¶å‘ä»£ç çš„æ ‡å‡†åº“ï¼Œå®ƒä½¿ç”¨å¼‚æ­¥ I/O ä½¿ç¨‹åºèƒ½å¤Ÿå¤„ç†å¤§é‡çš„ I/O æ“ä½œè€Œæ— éœ€é˜»å¡žã€‚asyncio æä¾›äº†ä¸€ä¸ªäº‹ä»¶å¾ªçŽ¯ï¼Œç”¨äºŽè°ƒåº¦å’Œæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œå®žçŽ°é«˜æ•ˆçš„å¹¶å‘ã€‚â€‹
â—¦
äº‹ä»¶å¾ªçŽ¯ï¼šasyncio çš„æ ¸å¿ƒï¼Œè´Ÿè´£è°ƒåº¦å’Œæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ã€‚â€‹
â—¦
åç¨‹ï¼šä½¿ç”¨ async def å®šä¹‰ï¼Œå¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œå¯ä»¥åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æŒ‚èµ·å’Œæ¢å¤ã€‚â€‹
â—¦
ä»»åŠ¡ï¼šåç¨‹çš„å°è£…ï¼Œè¡¨ç¤ºåç¨‹çš„æ‰§è¡Œï¼Œå¯ä»¥ç”±äº‹ä»¶å¾ªçŽ¯è°ƒåº¦ã€‚â€‹
â—¦
å¼‚æ­¥ I/Oï¼šé€šè¿‡ await å…³é”®å­—ç­‰å¾…å¼‚æ­¥æ“ä½œï¼Œä¸ä¼šé˜»å¡žäº‹ä»¶å¾ªçŽ¯ã€‚â€‹
é€šè¿‡ä½¿ç”¨ asyncioï¼Œå¯ä»¥ç¼–å†™é«˜æ•ˆçš„å¼‚æ­¥ä»£ç ï¼Œåœ¨å¤„ç†å¤§é‡ I/O æ“ä½œæ—¶æ˜¾è‘—æé«˜æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚â€‹
29.
Metaclassâ€‹
â—¦
å…ƒç±»ï¼ˆMetaclassï¼‰ï¼šç”¨äºŽåˆ›å»ºç±»çš„â€œç±»â€ï¼Œå®šä¹‰äº†ç±»çš„åˆ›å»ºå’Œè¡Œä¸ºæ–¹å¼ã€‚â€‹
â—¦
åŸºæœ¬æ¦‚å¿µï¼šç±»æœ¬èº«æ˜¯ç”±å…ƒç±»åˆ›å»ºçš„å¯¹è±¡ï¼Œé»˜è®¤çš„å…ƒç±»æ˜¯typeã€‚â€‹
â—¦
å®šåˆ¶ç±»è¡Œä¸ºï¼šé€šè¿‡é‡è½½å…ƒç±»çš„newå’Œinitæ–¹æ³•ï¼Œå¯ä»¥æŽ§åˆ¶ç±»çš„åˆ›å»ºè¿‡ç¨‹å’Œè¡Œä¸ºã€‚â€‹
â—¦
åº”ç”¨åœºæ™¯ï¼šå•ä¾‹æ¨¡å¼ã€è‡ªåŠ¨æ³¨å†Œç±»ç­‰ã€‚â€‹
10.1.2 é«˜çº§ä¸»é¢˜â€‹
1.
ç”Ÿæˆå™¨å’Œè¿­ä»£å™¨ï¼šè¯·è§£é‡Šç”Ÿæˆå™¨å’Œè¿­ä»£å™¨çš„åŒºåˆ«ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°çš„ä¾‹å­ã€‚â€‹
https://blog.csdn.net/Hardworking666/article/details/112061653â€‹
è¿™ä¸ªè®²å¾—å¥½ï¼šhttps://blog.csdn.net/weixin_44706915/article/details/116702292â€‹
â—¦
è¿­ä»£å™¨ï¼ˆIteratorï¼‰ï¼šæ˜¯ä¸€ç§å¯¹è±¡ï¼Œå®žçŽ°äº†iter()å’Œnext()æ–¹æ³•ï¼Œå¯ä»¥åœ¨forå¾ªçŽ¯ä¸­ä½¿ç”¨ã€‚â€‹
â—¦
ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰ï¼šæ˜¯ä¸€ç§ç‰¹æ®Šçš„è¿­ä»£å™¨ï¼Œä½¿ç”¨yieldè¯­å¥è¿”å›žå€¼ï¼Œå¯ä»¥æš‚åœå’Œæ¢å¤å‡½æ•°çš„æ‰§è¡Œã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
â€‹ â€‹
â€‹
2.
è£…é¥°å™¨ï¼šä»€ä¹ˆæ˜¯è£…é¥°å™¨ï¼Ÿè¯·å®žçŽ°ä¸€ä¸ªç®€å•çš„è£…é¥°å™¨ï¼Œå¹¶è¯´æ˜Žå®ƒçš„ä½œç”¨ã€‚â€‹
â—¦
è£…é¥°å™¨ï¼ˆDecoratorï¼‰ï¼šæ˜¯ä¸€ç§ç”¨äºŽä¿®æ”¹å‡½æ•°æˆ–æ–¹æ³•è¡Œä¸ºçš„å‡½æ•°ï¼Œé€šå¸¸ç”¨äºŽæ—¥å¿—è®°å½•ã€è®¿é—®æŽ§åˆ¶ã€æ€§èƒ½ç›‘æµ‹ç­‰ã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
â€‹ â€‹
â€‹
3.
å¹¶å‘ç¼–ç¨‹ï¼šPythonä¸­æœ‰å“ªäº›å®žçŽ°å¹¶å‘ç¼–ç¨‹çš„æ–¹æ³•ï¼Ÿè¯·ç®€å•ä»‹ç»ä¸€ä¸‹çº¿ç¨‹ã€è¿›ç¨‹å’Œåç¨‹ã€‚â€‹
â—¦
çº¿ç¨‹ï¼ˆThreadï¼‰ï¼šè½»é‡çº§è¿›ç¨‹ï¼Œä½¿ç”¨threadingæ¨¡å—å®žçŽ°ã€‚â€‹
â—¦
è¿›ç¨‹ï¼ˆProcessï¼‰ï¼šç‹¬ç«‹çš„è¿›ç¨‹ï¼Œä½¿ç”¨multiprocessingæ¨¡å—å®žçŽ°ã€‚â€‹
â—¦
åç¨‹ï¼ˆCoroutineï¼‰ï¼šä¸€ç§è½»é‡çº§çº¿ç¨‹ï¼Œä½¿ç”¨asyncioæ¨¡å—å®žçŽ°ï¼Œé€‚ç”¨äºŽI/Oå¯†é›†åž‹ä»»åŠ¡ã€‚å¼‚æ­¥ç¼–ç¨‹â€‹
     çº¿ç¨‹ã€è¿›ç¨‹å’Œåç¨‹çš„æ¦‚å¿µå’ŒåŒºåˆ«ï¼šhttps://blog.csdn.net/daaikuaichuan/article/details/82951084â€‹
     python GILæ¦‚å¿µå’ŒåŽŸç†ï¼šhttps://blog.csdn.net/qq_41586251/article/details/135117057â€‹
     pythonå¹¶å‘ç¼–ç¨‹ï¼šhttps://blog.csdn.net/weixin_52906070/article/details/132317118â€‹
è¿›ç¨‹é—´é€šä¿¡åŽŸç†ï¼šhttps://blog.csdn.net/xukris/article/details/135688894â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
â€‹ â€‹
â€‹
10.1.3 è¯­æ³•å’ŒåŸºç¡€â€‹
1.
Pythonçš„å˜é‡ä½œç”¨åŸŸï¼šè¯·è§£é‡ŠPythonä¸­å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡çš„åŒºåˆ«ï¼Œå¦‚ä½•åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹å…¨å±€å˜é‡ï¼Ÿâ€‹
 ä¿®æ”¹å…¨å±€å˜é‡ï¼šä½¿ç”¨globalå…³é”®å­—ã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
â€‹ â€‹
â€‹
2.
Pythonä¸­çš„å†…ç½®å‡½æ•°ï¼šåˆ—ä¸¾å¹¶ç®€è¦è§£é‡ŠPythonä¸­çš„äº”ä¸ªå¸¸ç”¨å†…ç½®å‡½æ•°ã€‚â€‹
â—¦
len()ï¼šè¿”å›žå¯¹è±¡çš„é•¿åº¦ã€‚â€‹
â—¦
type()ï¼šè¿”å›žå¯¹è±¡çš„ç±»åž‹ã€‚â€‹
â—¦
print()ï¼šæ‰“å°è¾“å‡ºã€‚â€‹
â—¦
range()ï¼šç”Ÿæˆä¸€ä¸ªèŒƒå›´å¯¹è±¡ã€‚â€‹
â—¦
sum()ï¼šè®¡ç®—åºåˆ—çš„å’Œã€‚â€‹
3.
åˆ—è¡¨æŽ¨å¯¼å¼ï¼šä»€ä¹ˆæ˜¯åˆ—è¡¨æŽ¨å¯¼å¼ï¼Ÿè¯·ç»™å‡ºä¸€ä¸ªåŒ…å«æ¡ä»¶å’ŒåµŒå¥—çš„åˆ—è¡¨æŽ¨å¯¼å¼çš„ä¾‹å­ã€‚â€‹
ç®€æ´çš„åˆ›å»ºåˆ—è¡¨çš„æ–¹æ³•â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
â€‹ â€‹
â€‹
10.1.4 é¢å‘å¯¹è±¡ç¼–ç¨‹â€‹
1.
ç±»ä¸Žå¯¹è±¡ï¼šè¯·è§£é‡ŠPythonä¸­ç±»å’Œå¯¹è±¡çš„æ¦‚å¿µï¼Œå¹¶å®žçŽ°ä¸€ä¸ªç®€å•çš„ç±»ã€‚â€‹
2.
ç»§æ‰¿å’Œå¤šæ€ï¼šè¯·è§£é‡Šç»§æ‰¿å’Œå¤šæ€çš„æ¦‚å¿µï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜Žå¦‚ä½•åœ¨Pythonä¸­å®žçŽ°å¤šæ€ã€‚â€‹
3.
é­”æœ¯æ–¹æ³•ï¼šä»€ä¹ˆæ˜¯é­”æœ¯æ–¹æ³•ï¼Ÿè¯·è§£é‡Šinitã€strå’Œreprçš„ä½œç”¨ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜Žå¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚â€‹
â—¦
é­”æœ¯æ–¹æ³•ï¼ˆMagic Methodsï¼‰ï¼šç‰¹æ®Šçš„æ–¹æ³•ï¼Œå¸¦æœ‰åŒä¸‹åˆ’çº¿ï¼Œç”¨äºŽé‡è½½æ“ä½œç¬¦æˆ–å®žçŽ°ç‰¹å®šè¡Œä¸ºã€‚â€‹
â—¦
initï¼šåˆå§‹åŒ–æ–¹æ³•ã€‚â€‹
â—¦
strï¼šè¿”å›žå¯¹è±¡çš„å¯è¯»å­—ç¬¦ä¸²è¡¨ç¤ºã€‚â€‹
â—¦
reprï¼šè¿”å›žå¯¹è±¡çš„å®˜æ–¹å­—ç¬¦ä¸²è¡¨ç¤ºã€‚â€‹
10.1.5 å†…å­˜ç®¡ç†å’Œä¼˜åŒ–â€‹
1.
åžƒåœ¾å›žæ”¶æœºåˆ¶ï¼šè¯·è§£é‡ŠPythonçš„åžƒåœ¾å›žæ”¶æœºåˆ¶æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚â€‹
â—¦
Pythonä½¿ç”¨å¼•ç”¨è®¡æ•°å’Œå¾ªçŽ¯åžƒåœ¾æ”¶é›†æœºåˆ¶æ¥ç®¡ç†å†…å­˜ã€‚â€‹
â—¦
å½“å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0æ—¶ï¼Œè¯¥å¯¹è±¡ä¼šè¢«åžƒåœ¾å›žæ”¶ã€‚â€‹
â—¦
å¾ªçŽ¯åžƒåœ¾æ”¶é›†å™¨å¯ä»¥æ£€æµ‹å’Œå›žæ”¶å¾ªçŽ¯å¼•ç”¨çš„å¯¹è±¡ã€‚â€‹
2.
å†…å­˜æ³„æ¼ï¼šä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼Ÿå¦‚ä½•åœ¨Pythonä¸­é¿å…å†…å­˜æ³„æ¼ï¼Ÿâ€‹
â—¦
å†…å­˜æ³„æ¼æ˜¯æŒ‡ç¨‹åºä¸­å·²ç»ä¸å†ä½¿ç”¨çš„å†…å­˜æ²¡æœ‰è¢«é‡Šæ”¾ã€‚â€‹
â—¦
åœ¨Pythonä¸­ï¼Œå†…å­˜æ³„æ¼é€šå¸¸ç”±å¾ªçŽ¯å¼•ç”¨æˆ–å¯¹å…¨å±€å¯¹è±¡çš„å¼•ç”¨é€ æˆã€‚â€‹
â—¦
å¯ä»¥ä½¿ç”¨gcæ¨¡å—å¼ºåˆ¶è¿›è¡Œåžƒåœ¾å›žæ”¶ã€‚â€‹
3.
æ€§èƒ½ä¼˜åŒ–ï¼šåœ¨Pythonä¸­è¿›è¡Œæ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œæœ‰å“ªäº›å¸¸è§çš„æ–¹æ³•å’Œå·¥å…·ï¼Ÿâ€‹
â—¦
ä½¿ç”¨å†…ç½®å‡½æ•°å’Œåº“ï¼šä¾‹å¦‚ï¼Œä½¿ç”¨map()ä»£æ›¿æ‰‹åŠ¨å¾ªçŽ¯ã€‚â€‹
â—¦
åˆ—è¡¨æŽ¨å¯¼å¼ï¼šç›¸æ¯”äºŽä¼ ç»Ÿçš„å¾ªçŽ¯ï¼Œåˆ—è¡¨æŽ¨å¯¼å¼æ›´é«˜æ•ˆã€‚â€‹
â—¦
å‡å°‘å…¨å±€å˜é‡çš„ä½¿ç”¨ï¼šå…¨å±€å˜é‡ä¼šå¢žåŠ è®¿é—®æ—¶é—´ã€‚â€‹
â—¦
ä½¿ç”¨ç”Ÿæˆå™¨ï¼šç”Ÿæˆå™¨æ¯”åˆ—è¡¨æ›´èŠ‚çœå†…å­˜ã€‚â€‹
10.1.6 é”™è¯¯å’Œå¼‚å¸¸å¤„ç†â€‹
1.
å¼‚å¸¸å¤„ç†ï¼šè¯·è§£é‡ŠPythonä¸­çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œå¹¶å†™å‡ºä¸€ä¸ªåŒ…å«try-except-finallyç»“æž„çš„ç¤ºä¾‹ã€‚â€‹
Pythonä½¿ç”¨try-except-finallyç»“æž„å¤„ç†å¼‚å¸¸ã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
â€‹ â€‹
â€‹
2.
è‡ªå®šä¹‰å¼‚å¸¸ï¼šå¦‚ä½•åœ¨Pythonä¸­åˆ›å»ºå’Œä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸ï¼Ÿâ€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
â€‹ â€‹
â€‹
3.
æ–­è¨€ï¼šè¯·è§£é‡Šassertè¯­å¥çš„ä½œç”¨ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜Žå…¶ä½¿ç”¨åœºæ™¯ã€‚â€‹
assertè¯­å¥ç”¨äºŽæ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¸ºçœŸï¼Œè‹¥ä¸ä¸ºçœŸåˆ™æŠ›å‡ºAssertionErrorã€‚â€‹
10.1.7 æ¨¡å—å’ŒåŒ…â€‹
1.
æ¨¡å—å¯¼å…¥ï¼šè¯·è§£é‡Šå¦‚ä½•åœ¨Pythonä¸­å¯¼å…¥æ¨¡å—ï¼Œä»€ä¹ˆæ˜¯ç›¸å¯¹å¯¼å…¥å’Œç»å¯¹å¯¼å…¥ï¼Ÿâ€‹
2.
åŒ…çš„ç»“æž„ï¼šè¯·æè¿°ä¸€ä¸ªPythonåŒ…çš„åŸºæœ¬ç»“æž„ï¼Œå¹¶è§£é‡Šinit.pyæ–‡ä»¶çš„ä½œç”¨ã€‚â€‹
3.
è™šæ‹ŸçŽ¯å¢ƒï¼šä»€ä¹ˆæ˜¯è™šæ‹ŸçŽ¯å¢ƒï¼Ÿå¦‚ä½•åˆ›å»ºå’Œç®¡ç†Pythonè™šæ‹ŸçŽ¯å¢ƒï¼Ÿâ€‹
10.1.8 å‡½æ•°å’Œé«˜çº§ç‰¹æ€§â€‹
1.
åŒ¿åå‡½æ•°ï¼šä»€ä¹ˆæ˜¯åŒ¿åå‡½æ•°ï¼ˆLambdaå‡½æ•°ï¼‰ï¼Ÿè¯·ç»™å‡ºä¸€ä¸ªä½¿ç”¨åŒ¿åå‡½æ•°çš„ä¾‹å­ã€‚â€‹
ç®€æ´æ€§ï¼šLambdaå‡½æ•°å…è®¸åœ¨ä¸€è¡Œä¸­å®šä¹‰ç®€å•çš„å‡½æ•°ï¼Œä»£ç æ›´åŠ ç®€æ´å’Œç´§å‡‘ã€‚â€‹
ä»£ç å¯è¯»æ€§ï¼šåœ¨ä¸€äº›ç®€å•çš„æƒ…å†µä¸‹ï¼Œlambdaå‡½æ•°å¯ä»¥ä½¿ä»£ç æ›´æ˜“è¯»ã€‚ä¾‹å¦‚ï¼Œåœ¨é«˜é˜¶å‡½æ•°ï¼ˆå¦‚mapã€filterã€sortedï¼‰ä¸­ä½¿ç”¨lambdaå‡½æ•°ï¼Œèƒ½ä½¿æ„å›¾æ›´åŠ æ¸…æ™°ã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
â€‹ â€‹
â€‹
2.
è£…é¥°å™¨ï¼šè¯·è§£é‡Šè£…é¥°å™¨çš„æ¦‚å¿µï¼Œå¹¶å®žçŽ°ä¸€ä¸ªè®°å½•å‡½æ•°æ‰§è¡Œæ—¶é—´çš„è£…é¥°å™¨ã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
â€‹ â€‹
â€‹
3.
ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼šä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Ÿè¯·å®žçŽ°ä¸€ä¸ªè‡ªå®šä¹‰çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚â€‹
 ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç”¨äºŽç®¡ç†èµ„æºçš„åˆ†é…å’Œé‡Šæ”¾ï¼Œå¸¸ç”¨äºŽæ–‡ä»¶æ“ä½œã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
class MyContextManager:â€‹
    def __enter__(self):â€‹
        print("Entering context")â€‹
        return selfâ€‹
    def __exit__(self, exc_type, exc_value, traceback):â€‹
        print("Exiting context")â€‹
with MyContextManager():â€‹
    print("Inside context")â€‹
â€‹ â€‹
â€‹
10.1.9 åº“å’Œæ¡†æž¶â€‹
1.
å¸¸ç”¨æ ‡å‡†åº“ï¼šåˆ—ä¸¾å¹¶ç®€è¦ä»‹ç»Pythonçš„å‡ ä¸ªå¸¸ç”¨æ ‡å‡†åº“ï¼Œä¾‹å¦‚osã€sysã€reã€jsonã€‚â€‹
â—¦
osï¼šä¸Žæ“ä½œç³»ç»Ÿäº¤äº’çš„æŽ¥å£ã€‚â€‹
â—¦
sysï¼šè®¿é—®ä¸ŽPythonè§£é‡Šå™¨ç›¸å…³çš„å˜é‡å’Œå‡½æ•°ã€‚â€‹
â—¦
reï¼šæ­£åˆ™è¡¨è¾¾å¼æ“ä½œã€‚â€‹
â—¦
jsonï¼šJSONç¼–ç å’Œè§£ç ã€‚â€‹
â—¦
datetimeï¼šå¤„ç†æ—¥æœŸå’Œæ—¶é—´ã€‚â€‹
2.
è¯·æ±‚åº“ï¼šè¯·è§£é‡Šå¦‚ä½•ä½¿ç”¨requestsåº“è¿›è¡ŒHTTPè¯·æ±‚ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜Žå¦‚ä½•å‘é€GETå’ŒPOSTè¯·æ±‚ã€‚â€‹
ä½¿ç”¨requestsåº“è¿›è¡ŒHTTPè¯·æ±‚ã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
import requestsâ€‹
# å‘é€GETè¯·æ±‚â€‹
response = requests.get('https://api.github.com')â€‹
print(response.status_code)â€‹
# å‘é€POSTè¯·æ±‚â€‹
response = requests.post('https://httpbin.org/post', data={'key': 'value'})â€‹
print(response.json())â€‹
â€‹ â€‹
â€‹
3.
æ•°æ®å¤„ç†ï¼šè¯·ç®€è¦ä»‹ç»pandasåº“çš„åŸºæœ¬åŠŸèƒ½ï¼Œå¹¶å®žçŽ°ä¸€ä¸ªç®€å•çš„æ•°æ®å¤„ç†ç¤ºä¾‹ã€‚â€‹
â€‹
â€‹ â€‹
ä»£ç å—â€‹
ï¿¼
import pandas as pdâ€‹
# åˆ›å»ºæ•°æ®æ¡†â€‹
data = {'Name': ['Alice', 'Bob', 'Charlie'], 'Age': [25, 30, 35]}â€‹
df = pd.DataFrame(data)â€‹
# é€‰æ‹©åˆ—â€‹
print(df['Name'])â€‹
# è¿‡æ»¤è¡Œâ€‹
print(df[df['Age'] > 30])â€‹
â€‹ â€‹
â€‹
â€‹
